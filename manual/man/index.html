<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Kiss Manual</title>

<meta name="description" content="Kiss Manual">
<meta name="keywords" content="Kiss Manual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">Kiss Manual</h1>



<a name="SEC_Overview"></a>
<h2 class="shortcontents-heading">Short Table of Contents</h2>

<div class="shortcontents">
<ul class="no-bullet">
<li><a name="stoc-Introduction" href="#toc-Introduction">1 Introduction</a></li>
<li><a name="stoc-System-Setup" href="#toc-System-Setup">2 System Setup</a></li>
<li><a name="stoc-Orientation" href="#toc-Orientation">3 Orientation</a></li>
<li><a name="stoc-Developing" href="#toc-Developing">4 Developing</a></li>
<li><a name="stoc-Front_002dend-API" href="#toc-Front_002dend-API">5 Front-end API</a></li>
<li><a name="stoc-Back_002dend-API" href="#toc-Back_002dend-API">6 Back-end API</a></li>
<li><a name="stoc-Method_002c-Macro_002c-Function-And-Variable-Index" href="#toc-Method_002c-Macro_002c-Function-And-Variable-Index">Method, Macro, Function And Variable Index</a></li>

</ul>
</div>

<a name="SEC_Contents"></a>
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">
<ul class="no-bullet">
<li><a name="toc-Introduction" href="#Introduction">1 Introduction</a>
<ul class="no-bullet">
  <li><a name="toc-Kiss-Highlights" href="#Kiss-Highlights">1.1 <em>Kiss</em> Highlights</a>
  <ul class="no-bullet">
    <li><a name="toc-Back_002dend-Highlights" href="#Back_002dend-Highlights">1.1.1 Back-end Highlights</a></li>
    <li><a name="toc-Front_002dend-Highlights" href="#Front_002dend-Highlights">1.1.2 Front-end Highlights</a></li>
    <li><a name="toc-Back_002dend-Web-Service-Example" href="#Back_002dend-Web-Service-Example">1.1.3 Back-end Web Service Example</a></li>
    <li><a name="toc-Front_002dend-Web-Service-Usage-Example" href="#Front_002dend-Web-Service-Usage-Example">1.1.4 Front-end Web Service Usage Example</a></li>
  </ul></li>
  <li><a name="toc-HTML-component-usage" href="#HTML-component-usage">1.2 HTML component usage</a></li>
  <li><a name="toc-System-Maturity-And-Future" href="#System-Maturity-And-Future">1.3 System Maturity And Future</a></li>
  <li><a name="toc-Contact-And-Links" href="#Contact-And-Links">1.4 Contact And Links</a></li>
  <li><a name="toc-License" href="#License">1.5 License</a></li>
  <li><a name="toc-Acknowledgments" href="#Acknowledgments">1.6 Acknowledgments</a></li>
</ul></li>
<li><a name="toc-System-Setup" href="#System-Setup">2 System Setup</a>
<ul class="no-bullet">
  <li><a name="toc-Important-1" href="#Important-1">2.1 Important</a></li>
  <li><a name="toc-Quick_002dstart-Checklist-1" href="#Quick_002dstart-Checklist-1">2.2 Quick-start Checklist</a></li>
  <li><a name="toc-Runtime-Environments" href="#Runtime-Environments">2.3 Runtime Environments</a></li>
  <li><a name="toc-Pre_002drequisites-1" href="#Pre_002drequisites-1">2.4 Pre-requisites</a></li>
  <li><a name="toc-Download-Kiss-1" href="#Download-Kiss-1">2.5 Download Kiss</a></li>
  <li><a name="toc-Documentation" href="#Documentation">2.6 Documentation</a></li>
  <li><a name="toc-Setup-And-Configuration-1" href="#Setup-And-Configuration-1">2.7 Setup And Configuration</a></li>
  <li><a name="toc-Building-The-System" href="#Building-The-System">2.8 Building The System</a>
  <ul class="no-bullet">
    <li><a name="toc-Gradle" href="#Gradle">2.8.1 Gradle</a></li>
    <li><a name="toc-IntelliJ" href="#IntelliJ">2.8.2 IntelliJ</a></li>
    <li><a name="toc-Community-Edition-Too" href="#Community-Edition-Too">2.8.3 Community Edition Too</a>
    <ul class="no-bullet">
      <li><a name="toc-Ultimate-Edition" href="#Ultimate-Edition">2.8.3.1 Ultimate Edition</a></li>
    </ul></li>
    <li><a name="toc-NetBeans" href="#NetBeans">2.8.4 NetBeans</a></li>
    <li><a name="toc-eclipse_002c-VSCode_002c-and-Others" href="#eclipse_002c-VSCode_002c-and-Others">2.8.5 eclipse, VSCode, and Others</a></li>
  </ul></li>
  <li><a name="toc-What-Do-I-Do-With-It-Now_003f" href="#What-Do-I-Do-With-It-Now_003f">2.9 What Do I Do With It Now?</a></li>
</ul></li>
<li><a name="toc-Orientation" href="#Orientation">3 Orientation</a>
<ul class="no-bullet">
  <li><a name="toc-Back_002dend-Application-Files" href="#Back_002dend-Application-Files">3.1 Back-end Application Files</a></li>
  <li><a name="toc-Front_002dend-Application-Files" href="#Front_002dend-Application-Files">3.2 Front-end Application Files</a></li>
  <li><a name="toc-Single-Page-Application" href="#Single-Page-Application">3.3 Single Page Application</a></li>
  <li><a name="toc-Controlling-Browser-Cache" href="#Controlling-Browser-Cache">3.4 Controlling Browser Cache</a></li>
  <li><a name="toc-Creating-JavaDocs" href="#Creating-JavaDocs">3.5 Creating JavaDocs</a></li>
  <li><a name="toc-Deploying-A-Kiss-Application" href="#Deploying-A-Kiss-Application">3.6 Deploying A Kiss Application</a></li>
  <li><a name="toc-Learning-The-System" href="#Learning-The-System">3.7 Learning The System</a></li>
</ul></li>
<li><a name="toc-Developing" href="#Developing">4 Developing</a>
<ul class="no-bullet">
  <li><a name="toc-Back_002dend-Development" href="#Back_002dend-Development">4.1 Back-end Development</a>
  <ul class="no-bullet">
    <li><a name="toc-REST-Server" href="#REST-Server">4.1.1 REST Server</a></li>
    <li><a name="toc-Application-Code" href="#Application-Code">4.1.2 Application Code</a></li>
    <li><a name="toc-Programming-Languages" href="#Programming-Languages">4.1.3 Programming Languages</a></li>
  </ul></li>
  <li><a name="toc-Front_002dend-Development-1" href="#Front_002dend-Development-1">4.2 Front-end Development</a></li>
  <li><a name="toc-Reports-And-Exports" href="#Reports-And-Exports">4.3 Reports And Exports</a></li>
</ul></li>
<li><a name="toc-Front_002dend-API" href="#Front_002dend-API">5 Front-end API</a>
<ul class="no-bullet">
  <li><a name="toc-Calling-REST-Services" href="#Calling-REST-Services">5.1 Calling REST Services</a></li>
  <li><a name="toc-Kiss-Components" href="#Kiss-Components">5.2 Kiss Components</a>
  <ul class="no-bullet">
    <li><a name="toc-Tagless-Components" href="#Tagless-Components">5.2.1 Tagless Components</a></li>
  </ul></li>
  <li><a name="toc-Modal-Popup-Windows" href="#Modal-Popup-Windows">5.3 Modal Popup Windows</a></li>
  <li><a name="toc-File-Uploads" href="#File-Uploads">5.4 File Uploads</a></li>
  <li><a name="toc-Utilities" href="#Utilities">5.5 Utilities</a></li>
  <li><a name="toc-Controlling-Browser-Cache-1" href="#Controlling-Browser-Cache-1">5.6 Controlling Browser Cache</a></li>
  <li><a name="toc-Additional-Resources" href="#Additional-Resources">5.7 Additional Resources</a></li>
</ul></li>
<li><a name="toc-Back_002dend-API" href="#Back_002dend-API">6 Back-end API</a>
<ul class="no-bullet">
  <li><a name="toc-Database-API" href="#Database-API">6.1 Database API</a></li>
  <li><a name="toc-JSON" href="#JSON">6.2 JSON</a></li>
  <li><a name="toc-Utilities-1" href="#Utilities-1">6.3 Utilities</a></li>
</ul></li>
<li><a name="toc-Method_002c-Macro_002c-Function-And-Variable-Index" href="#Method_002c-Macro_002c-Function-And-Variable-Index">Method, Macro, Function And Variable Index</a></li>

</ul>
</div>





<a name="Introduction"></a>
<h2 class="chapter">1 Introduction</h2>

<p>The <em>KISS Framework</em> is an application development framework for
developing web-based business applications.  The main home for <em>Kiss</em>
is <a href="https://github.com/blakemcbride/Kiss">https://github.com/blakemcbride/Kiss</a>
</p>

<p>Kiss&rsquo; focus is on
simplicity and development speed.  By being simple to develop in,
development and support of the application can occur more rapidly.
Simplicity is achieved by abstracting away as much common
functionality as possible so that developer lines of code are
maximally for the application solution rather than infrastructure and
support of the framework.  Throughout the framework, business-normal
defaults have been employed in order to minimize commonly needed
functionality.
</p>
<p>Another goal of the <em>Kiss</em> framework is to be a complete web-based
application development solution.  <em>Kiss</em> isn&rsquo;t a browser solution
alone, nor is it a back-end solution.  <em>Kiss</em> includes solutions for
both ends &ndash; although the two sides may largely be used independently.
</p>
<p><em>Kiss</em> attempts to create a consistent interface.  This can greatly
simply code even in simple cases.  For example, in terms of an input
text control, why would you disable/enable it with:
</p>
<div class="example">
<pre class="example">$('#id').prop('disable', false);
$('#id').prop('disable', true);
</pre></div>

<p>and then hide/show it with:
</p>
<div class="example">
<pre class="example">$('#id').hide();
$('#id').show();
</pre></div>

<p><em>Kiss</em> provides a consistent interface.  With <em>Kiss</em>, you would do:
</p>
<div class="example">
<pre class="example">$$('id').disable();
$$('id').enable();
$$('id').hide();
$$('id').show();
</pre></div>
    
<p><em>Kiss</em> is designed to be simple to get started with, simple to learn,
and simple to use.  <em>Kiss</em> does this while supporting important
technologies such as micro-services, front-end components, and SQL.
</p>
<p>The term <em>single page application</em> has several, subtly different,
meanings.  One meaning is that the entire application code is bundled
into a single file or HTTP GET request.  In that sense, <em>Kiss</em> is not a
single page application.  This makes no sense for a business
application that could have hundreds of screens.
</p>
<p>Another meaning of the term <em>single page application</em> is that there is
only a single <code>html</code> tag and all of the remaining pages are
modifications of the original <code>html</code> tag contents.  In this
sense, <em>Kiss</em> is a <em>single page application</em>.  <em>Kiss</em>
applications lazy-load as needed.  Browser cache is leveraged to
minimize Internet traffic.
</p>
<p><em>Kiss</em> is used in a production environment and built by someone with
more than 30 years experience as a framework designer and a business
application software engineer.  So <em>Kiss</em> is not a proof of concept.
</p>
<p><em>Kiss</em> was built as a solution to the challenges faced by the author
when developing web-based business applications.  As such, <em>Kiss</em> is
more a solution for business application development than for the
development of public facing company presentation web sites.
</p>
<p>Another goal of <em>Kiss</em> is to keep the front-end and back-end as
independent of each other as possible.  To this end, communications
between the front-end and back-end occur via REST services and JSON.
This accomplished two things.  First, it allows your organization to be
best prepared for the ever-evolving software environment.  Pieces can
be changed and enhanced without causing massive re-writes of the entire
system.  The second advantage is that by pushing as much processing to
the front-end as possible (rendering the display on the front-end),
the system can better scale.
</p>
<a name="Kiss-Highlights"></a>
<h3 class="section">1.1 <em>Kiss</em> Highlights</h3>

<p>Some highlights of the <em>Kiss</em> system include:
</p>
<a name="Back_002dend-Highlights"></a>
<h4 class="subsection">1.1.1 Back-end Highlights</h4>

<ol>
<li> Micro services - add, change, or delete a web service on a running system.
</li><li> Each web-method is in a single file and are very simple.  No configuration files or setup code needed.
</li><li> Easy access to common SQL databases with support for nested queries without cursor interference.
</li><li> All REST services are stateless.  However, the system fully authenticates each request.
</li><li> Changes to web services occur immediately, on a running system, without the need to reboot the application.
</li><li> A growing class library to handle common business application needs.
</li><li> Back-end framework is written in Java, and the system is portable to Linux or Windows servers.
</li><li> Web services may be written in Groovy, Java or Common Lisp.  Python,
JavaScript, Ruby, and Scala are expected to follow soon.
</li><li> User authentication
</li><li> Asynchronous back-end REST services (via a queue and thread pool) provide support for heavy loads and high throughput.
</li></ol>

<a name="Front_002dend-Highlights"></a>
<h4 class="subsection">1.1.2 Front-end Highlights</h4>

<ol>
<li> Build your own HTML components thus encapsulating any amount of code into a simple, custom HTML tag.
</li><li> Browser cache control.  Never ask your users to clear their browser cache again.
</li><li> All code written in JavaScript/HTML/CSS.  No need for a complex build and debug process, nor any need to learn yet another language.
</li><li> Growing list of included business oriented components designed to provide simple access to fully functional business components.
</li><li> Straight forward means of designing your own components without a lot of hidden and unpredictable magic.
</li><li> System is small and concise, rather then hundreds of megabytes other systems take up.
</li><li> Consistent and simple API.
</li></ol>

<a name="Back_002dend-Web-Service-Example"></a>
<h4 class="subsection">1.1.3 Back-end Web Service Example</h4>


<p>The following example depicts a complete back-end web service.  The
path to the file is its URL.  The class name is the web method name.
</p>
<p>The file is a text file, but compiled code gets executed.
Authentication occurs before <code>main</code> is called.
</p>
<p>Simply drop the file in place and the web service and method become
immediately available on a running system.  Changes to the service
take effect immediately (no need to reboot the server app).  There are
no configuration files or other code that needs to be changed.
</p>
<p>For example, the following file is located in the
<code>services</code> directory.
</p>
<div class="example">
<pre class="example">class MyWebService {
    void myWebMethod(JSONObject injson, JSONObject outjson) {
        int num1 = injson.getInt(&quot;num1&quot;);
        int num2 = injson.getInt(&quot;num2&quot;);
        outjson.put(&quot;result&quot;, num1 + num2);
    }
}
</pre></div>

<a name="Front_002dend-Web-Service-Usage-Example"></a>
<h4 class="subsection">1.1.4 Front-end Web Service Usage Example</h4>

<p>The following front-end example utilizes the web service defined in the
previous sub-section.
</p>
<div class="example">
<pre class="example">let data = {
    num1:  22,
    num2:  11
};
let res = await Server.call(&quot;services/MyWebService&quot;, &quot;myWebMethod&quot;, data);
if (res._Success) {
    let result = res.result;
    //...
}
</pre></div>
    
<a name="HTML-component-usage"></a>
<h3 class="section">1.2 HTML component usage</h3>
   
<p>To use a component add to HTML:
</p>
<div class="example">
<pre class="example">&lt;my-component&gt;&lt;/my-component&gt;
</pre></div>

<p>Add to JavaScript:
</p>
<div class="example">
<pre class="example">Utils.useComponent('MyComponent');
</pre></div>
    
<p>The component can put any HTML in the component location, have any
functionality, have its own modal windows, and use other components.
The component can have custom and non-custom attributes (like style).
Non-custom attributes do what you&rsquo;s expect them to do.
</p>
<p>The system also supports tag-less components.  This provides an easy
way to package arbitrary blocks of code (that can have screens too).
</p>
<a name="System-Maturity-And-Future"></a>
<h3 class="section">1.3 System Maturity And Future</h3>

<p>Largely, the Kiss system, in the form of running applications, has
been used in production environments for a few years.  The effort to
tease away the generic parts and generalize them is recent (2018).
Moving forward, as time permits, the priorities are as follows:
</p>
<ol>
<li> Improve documentation
</li><li> More examples
</li><li> Greater front-end functionality (modal windows, grid control, etc. - note that these can be done by any other known facility.  They just don&rsquo;t come included with Kiss yet.)
</li><li> Support more back-end languages (such as Python, JavaScript, Ruby, etc.)
</li></ol>

<a name="Contact-And-Links"></a>
<h3 class="section">1.4 Contact And Links</h3>

<p>The <em>Kiss</em> main web site is at <a href="http://kissweb.org">http://kissweb.org</a>
</p>
<p>Source code is at <a href="https://github.com/blakemcbride/Kiss">https://github.com/blakemcbride/Kiss</a>
</p>
<p>Public discussion and support is available at <br> <a href="https://groups.google.com/forum/#!forum/kissweb">https://groups.google.com/forum/#!forum/kissweb</a>
</p>
<p>Issue tracking is at <a href="https://github.com/blakemcbride/Kiss/issues">https://github.com/blakemcbride/Kiss/issues</a>
</p>
<p>Commercial support is available.  Contact us via email at <a href="mailto:kissweb.org@gmail.com">kissweb.org@gmail.com</a>
</p>
<a name="License"></a>
<h3 class="section">1.5 License</h3>

<p>Copyright (c) 2018 Blake McBride (blake@mcbride.name)
</p>
<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
&ldquo;Software&rdquo;), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:
</p>
<p>1. Redistributions of source code must retain the above copyright
notice, this list of conditions, and the following disclaimer.
</p>
<p>2. Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.
</p>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&ldquo;AS IS&rdquo; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</p>
<a name="Acknowledgments"></a>
<h3 class="section">1.6 Acknowledgments</h3>

<p>The Kiss design, code, documentation, and web site were written by Blake
McBride.  The author gratefully acknowledges and appreciates, among others, the following:
</p>

<p>Apache Groovy located at <a href="http://groovy-lang.org">http://groovy-lang.org</a>
</p>
<p>ABCL project located at <a href="https://common-lisp.net/project/armedbear">https://common-lisp.net/project/armedbear</a>
</p>
<p>Dynamic Loader located at <a href="https://github.com/dvare/dynamic-loader">https://github.com/dvare/dynamic-loader</a>
</p>
<p>JSON-Java located at <a href="https://github.com/stleary/JSON-java">https://github.com/stleary/JSON-java</a> (although
I am using a modified version included with the system)
</p>
<p>C3P0 located at <a href="https://www.mchange.com/projects/c3p0">https://www.mchange.com/projects/c3p0</a>
</p>
<p>Melaine Sarbey (<a href="mailto:melswildart@gmail.com">melswildart@gmail.com</a>) for creating the Kiss logo.
</p>



<a name="System-Setup"></a>
<h2 class="chapter">2 System Setup</h2>

<a name="Important"></a><a name="Important-1"></a>
<h3 class="section">2.1 Important</h3>

<p>The <em>Kiss</em> system uses <em>gradle</em> as its build system.  This
works under Linux, Mac, Windows, etc.  Although you need to install
Java before anything will work, you do not need to install
<em>gradle</em>.  When you first try to build the system, it will detect
that you hadn&rsquo;t installed <em>gradle</em> and it will download it and
install it for you.  This means it will take a bit longer on first
build.  <em>Gradle</em> also downloads allof the required libraries the
first time too.  So again, the first build will be slow.  Subsequent
builds are fast, and since <em>Kiss</em> uses microservices, most of the
time you don&rsquo;t even have to build at all.
</p>
<p>The program that runs <em>gradle</em> is &ldquo;<em>gradlew</em>&rdquo; under Unix like
systems and &ldquo;<em>gradlew.bat</em>&rdquo; under Windows.  In this manual,
&ldquo;<em>gradlew</em>&rdquo; will be shown as &ldquo;<em>./gradlew</em>&rdquo;.  The &ldquo;./&rdquo; is
required under Linux and Mac but not under Windows.  When running on
Windows, use &ldquo;gradlew&rdquo; rather than &ldquo;./gradlew&rdquo;.
</p>

<a name="Quick_002dstart-Checklist"></a><a name="Quick_002dstart-Checklist-1"></a>
<h3 class="section">2.2 Quick-start Checklist</h3>

<p>The following enumerates the steps necessary to get the system up and running:
</p>
<ol>
<li> See <a href="#Pre_002drequisites">Pre-requisites</a>
</li><li> See <a href="#Download-Kiss">Download Kiss</a>
</li><li> See <a href="#Setup-And-Configuration">Setup And Configuration</a>
</li><li> Run the server by running <code>./gradlew tomcatRun</code>
</li><li> You can access the server by going to <code>http://localhost:8080</code>
</li></ol>

<p>Use <code>^C</code> to stop the server.
</p>
<a name="Runtime-Environments"></a>
<h3 class="section">2.3 Runtime Environments</h3>

<p>As shipped, there are three different environments that <em>Kiss</em> may
run in as follows:
</p>
<ol>
<li> Test
</li><li> Development
</li><li> Production
</li></ol>

<p>The <em>Test</em> environment is started with <code>./gradlew tomcatRun</code> but
is only good for a quick test to see if the system is running.  It is
neither good in a development nor production environment.
</p>
<p>The <em>Production</em> scenario is created with a single command 
(<code>./gradlew war</code>) and produces a single <code>war</code> file that
can be deployed.
</p>
<p>Unfortunately, the <em>Development</em> environment takes many steps to
setup.  This is largely due to the complexity and variations between
IDE&rsquo;s.  However, once the environment is setup, developing with
<em>Kiss</em> is smooth and easy.
</p>
<p>The <em>Development</em> environment consists of two servers.  One serves
the back-end REST services, and the second serves the front-end HTML, CSS, 
and JavaScript files.  By using this method, both front-end and back-end
source files can be changed on a running system and take effect immediately
without any server reboots, re-deploys, or file copies.  (This is also
true of a production environment when the new files are put in place.)
</p>
<p>Back-end REST services are served, debugged, and edited through the IDE.
Saving a source file is all that is needed to have it take effect.
Unfortunately, setting up IDE&rsquo;s to do this takes several steps and is different
for each IDE.
</p>
<p>The front-end (HTML, CSS, and JavaScript files) are served by a simple
server supplied with the <em>Kiss</em> system.  See <a href="#Front_002dend-Development">Front-end Development</a>.
Debugging is normally done through the browser debugger.
There is no setup, and it runs by executing a single command.
</p>
<a name="Pre_002drequisites"></a><a name="Pre_002drequisites-1"></a>
<h3 class="section">2.4 Pre-requisites</h3>

<p>You should download and install the following pre-requisites.
</p>
<ol>
<li> Java JDK 8 from <a href="https://www.oracle.com/java/index.html">https://www.oracle.com/java/index.html</a>
</li><li> An SQL database server (e.g.&nbsp;PostgreSQL, Microsoft SQL Server, MySQL, Oracle, SQLite)
</li><li> IDE (e.g.&nbsp;<a href="https://www.jetbrains.com/idea">IntelliJ</a>, Netbeans, eclipse)
</li><li> GIT source code control system
</li></ol>

<p>The system was built and tested with JDK 8, <a href="https://www.postgresql.org">PostgreSQL</a>, <a href="https://www.jetbrains.com/idea">IntelliJ</a>, and 
<a href="http://tomcat.apache.org">tomcat</a>.  Other environments such as IIS, Glassfish, eclipse, should work fine but may require some configuration.
</p>
<p><em>Gradle</em> is the build system used.  The <em>Kiss</em> system
automatically installs <em>gradle</em> so you need not do anything
special.  See <a href="#Important">Important</a>
</p>
<p>Install the above per their instructions.
</p>
<p>With the proper plugins, all of the IDE&rsquo;s can import the Gradle build files.
</p>
<a name="Download-Kiss"></a><a name="Download-Kiss-1"></a>
<h3 class="section">2.5 Download Kiss</h3>


<p>Kiss is located at <a href="https://github.com/blakemcbride/Kiss">https://github.com/blakemcbride/Kiss</a>
</p>
<p>It can be downloaded via the following command:
</p>
<p><code>git clone https://github.com/blakemcbride/Kiss.git</code>
</p>
<a name="Documentation"></a>
<h3 class="section">2.6 Documentation</h3>

<p>The <em>Kiss</em> documentation consists of three parts; this manual, the detailed back-end API documentation contained in the JavaDocs,
and the detailed front-end API documentation.
The JavaDocs do not come with the system, but you can generate them yourself with what is provided.  See <a href="#javadoc">Creating JavaDocs</a>.
</p>
<p>This manual may be created in two forms.  The first is in an HTML
form.  The system comes with this.  You can also generate a nicely
formatted PDF file with the following commands (if you have all of the tools installed):
</p>
<div class="example">
<pre class="example">cd manual
make Kiss.pdf
</pre></div>

<p>Updated to the HTML file are achieved with the following commands:
</p><div class="example">
<pre class="example">cd manual
make
</pre></div>

<p>All of the documentation can be accessed with your browser.  For example,
if the root of <em>Kiss</em> is located at <code>/my/home/path/kiss</code> then you will be able to access the three
manuals at the following URL&rsquo;s:
</p>
<div class="example">
<pre class="example">file:///my/home/path/kiss/manual/man/index.html

file:///my/home/path/kiss/build/docs/javadoc/index.html

file:///my/home/path/kiss/manual/jsdoc/index.html
</pre></div>

<a name="Setup-And-Configuration"></a><a name="Setup-And-Configuration-1"></a>
<h3 class="section">2.7 Setup And Configuration</h3>

<p>The system is configured by the contents of a single file <code>src/main/application/KissInit.groovy</code>
A reboot of the web server is required if any of the parameters in this file are changed.
</p>
<p>Given that Kiss is for business applications, it authenticates its
users.  In order for this to work, there is usually a database of valid
users.  This information is persisted in an SQL database.  Therefore a
database is normally required.  However, for testing purposes, if no
database is configured, the system will still run and allow any
username and password to succeed.
</p>
<p>As shipped, the system comes configured as follows:
</p>
<table>
<tr><td>Database type</td><td>PostgreSQL</td></tr>
<tr><td>Host</td><td>localhost</td></tr>
<tr><td>Database</td><td>not configured</td></tr>
<tr><td>Database user</td><td>postgres</td></tr>
<tr><td>Database user password</td><td>postgres</td></tr>
</table>

<p>Valid options for the Database type are as follows:
</p>
<ul>
<li> PostgreSQL
</li><li> MicrosoftServer
</li><li> MySQL
</li><li> Oracle
</li><li> SQLite
</li></ul>

<p>Support for other databases is easy to add.
</p>
<p><em>setMaxWorkerThreads</em> defines how many REST services may be processed in parallel.  Service requests
beyond this are placed in a FIFO queue and processed as worker threads become available.  This capability
drastically improves the system&rsquo;s ability to handle a large number of simultaneous users.
</p>
<p>The remaining parameters should be self-explanatory.  Use the format
shown in the example.
</p>
<p>Create the database (named &ldquo;kiss&rdquo; above or whatever name you
configured).  After that, you can run the script file <code>init.sql</code>
to create the table and some initial data.
</p>
<p>The default username is <em>kiss</em>, and the default password is
<em>password</em>
</p>
<a name="Building-The-System"></a>
<h3 class="section">2.8 Building The System</h3>

<p>The system may be built in several way.  It can be build from the
command line using <em>Gradle</em>, or it can be build from within your
favorite IDE.  Using an IDE has the great advantage of a built-in
debugger.  This section will outline usage of some of these scenarios.
</p>
<a name="Gradle"></a>
<h4 class="subsection">2.8.1 Gradle</h4>

<p><em>Gradle</em> is a build system that describes and automates the build process.
<em>Kiss</em> utilizes <em>Gradle</em> to automate its build and debug processes.
Most IDE&rsquo;s are able to utilize the <em>Gradle</em> build system.
<em>Gradle</em> may be used as follows:
(Note, this is not a list of command you should run in order to get the system running.) 
See <a href="#Important">Important</a> and See <a href="#Quick_002dstart-Checklist">Quick-start Checklist</a>.
</p>
<dl compact="compact">
<dt><code>./gradlew javadoc</code></dt>
<dd><p>JavaDocs end up in the <code>build/docs/javadoc</code> directory.
</p></dd>
<dt><code>./gradlew war</code></dt>
<dd><p>The WAR file ends up in the <code>build/libs</code> directory.  
This file can be just placed in the webapps directory of tomcat to deploy.
</p></dd>
<dt><code>./gradlew explodedWar</code></dt>
<dd><p>This builds a set of files that would have been placed in the deployment WAR file.  It is used, when needed,
to run the entire system from a local directory.  The files are placed in the <code>build/exploded/kiss</code>
directory.
</p></dd>
<dt><code>./gradlew clean</code></dt>
<dd><p>Removes all the generated files.
</p></dd>
<dt><code>./gradlew tomcatRun</code></dt>
<dd><p>Runs a sample server serving up the application.  The system will be
available from your local browser at
<code>http://localhost:8080</code>.  Use <code>^C</code> to exit.
</p></dd>
<dt><code>./gradlew tomcatRunDebug</code></dt>
<dd><p>Runs a sample server serving up the application.  The system will be
available from your local browser at
<code>http://localhost:8080</code>.  Use <code>^C</code> to exit. Once <em>Kiss</em> is running in debug mode,
you may debug the application by attaching to the running <em>tomcat</em> server at port 5005.
</p></dd>
</dl>

<a name="IntelliJ"></a>
<h4 class="subsection">2.8.2 IntelliJ</h4>

<p>IntelliJ is a good IDE.  It is the only IDE that supports debugging
<em>Groovy</em> as microservices.  The free, community version is adequate for developing
and debugging with <em>Kiss</em>.  IntelliJ should be configured with
support for <code>Gradle</code>, <code>tomcat</code>, and <code>Groovy</code>.  If using the Community Edition, all of the install defaults are correct. 
</p>
<p>The following should be done for the Community or Ultimate Editions:
</p>
<ol>
<li> Get a fresh clone of <em>Kiss</em>
</li><li> When you first enter IntelliJ, select <code>Import Project</code> and select the root of your <em>Kiss</em> clone.
</li><li> Select Import project from external model, then select <em>Gradle</em>.
</li><li> Accept all defaults
</li></ol>

<p>In order to do front-end and back-end development at the same time, a dual server setup where
the front-end and back-end are served by different servers is recommended.  See <a href="#Front_002dend-Development">Front-end Development</a>
This section documents the back-end portion.
</p>
<a name="Community-Edition-Too"></a>
<h4 class="subsection">2.8.3 Community Edition Too</h4>

<p>The following is applicable to both the Community Edition and the Ultimate Editions of IntelliJ.
</p>
<p>In the upper right hand corner of the IDE there is a tab labeled <em>Gradle</em>.  When that tab is expanded you may execute <em>Gradle</em> tasks that you select.
Expand <em>Tasks</em> and then <em>gretty</em>.  The main task you will be interested in is <em>tomcatStartDebug</em>.  That task starts <em>Kiss</em>
in debug mode suitable for debugging the back-end portion of <em>Kiss</em>.  Double-clicking on that task builds the system and launched the integrated <em>tomcat</em>
server.  
</p>
<p>When the output windows says &ldquo;Listening for transport dt_socket at address: 5005&rdquo; then select <em>Run</em> an then <em>Attach to process...</em>.
A window asking you to select what to attach to will appear.  It will only contain a single item.  Select it. You can then go to the following URL
on your browser:  <a href="http://localhost:8080">http://localhost:8080</a>  You can now debug the application.
</p>
<p>Note two tabs on the bottom of the IDE labeled <em>Run</em> and <em>Debug</em>.  These two tabs are very useful during debugging.
</p>


<a name="Ultimate-Edition"></a>
<h4 class="subsubsection">2.8.3.1 Ultimate Edition</h4>

<p>Additionally, the following steps may be used to simplify debugging when using the <em>Ultimate</em> (paid) version of <em>IntelliJ</em>:
</p>


<ol>
<li> Go to Run / Edit Configurations
</li><li> Click the &ldquo;+&rdquo; in the upper left corner
</li><li> Select <em>Tomcat Server</em> / <em>Local</em>
</li><li> Change the Name to Kiss
</li><li> Click the Deployment tab
</li><li> Click the &ldquo;+&rdquo; in the upper right quadrant of the screen (not the upper left)
</li><li> Select <em>Artifact</em> and then <em>Kiss.war</em> (exploded)
</li><li> Set &ldquo;Application context:&rdquo; to &ldquo;/&rdquo;
</li><li> Click &quot;OK&quot;
</li></ol>

<p>To run the app in debug mode just click the green bug at the top of the screen.  This will run the front-end and back-end 
in a debug mode.  Although this is the recommended setup for the back-end portion during development, it is not recommended
for front-end development.  In order to do front-end and back-end development at the same time, a dual server setup where
the front-end and back-end are served by different servers is recommended.    See <a href="#Front_002dend-Development">Front-end Development</a>
</p>
<a name="NetBeans"></a>
<h4 class="subsection">2.8.4 NetBeans</h4>

<p>The <em>Kiss</em> system works with NetBeans.  The only shortcoming is
that <em>Groovy</em> code can not be debugged.  These instructions are
for NetBeans 8.2.  These instructions need only be done once.
</p>
<p>When installing NetBeans, be sure to select the following Runtimes:
</p>
<ul>
<li> Java EE
</li><li> HTML5 / JavaScript
</li><li> Groovy
</li><li> Apache Tomcat
</li></ul>

<p>Go into NetBeans and select <em>File</em> and <em>Open Project</em>.
Select the root of the <em>Kiss</em> project.  From the <em>Projects</em>
pane, you can right-click on the project root.  You will then see an
option labeled <em>Tasks</em>.  That is where you can execute
<em>Gradle</em> tasks.  To build and debug the application, select
<em>tomcat</em> and then <em>tomcatRunDebug</em>.  You will then see a
message &ldquo;Listening for transport dt_socket at address: 5005&rdquo;.  From
the top menu, select <em>Debug</em> and then <em>Attach Debugger</em>.
The defaults should be correct.  Accept the popup.  You may then go to
the following URL on your browser: <a href="http://localhost:8080">http://localhost:8080</a>
You can now debug the application.
</p>
<p>The <em>Output</em> tab on the bottom will display helpful information.
</p>

<p>Although this is the recommended setup for the back-end portion during
development, it is not recommended for front-end development.  In
order to do front-end and back-end development at the same time, a
dual server setup where the front-end and back-end are served by
different servers is recommended.  See <a href="#Front_002dend-Development">Front-end Development</a>
</p>


<a name="eclipse_002c-VSCode_002c-and-Others"></a>
<h4 class="subsection">2.8.5 eclipse, VSCode, and Others</h4>

<p>Other IDE&rsquo;s that support <em>Gradle</em> should work fine.  In
particular, <em>VSCode</em> and <em>eclipse</em> have been tested and are
known to work.
</p>
<a name="What-Do-I-Do-With-It-Now_003f"></a>
<h3 class="section">2.9 What Do I Do With It Now?</h3>

<p>What you have at this point is the beginnings of your new application.
<em>Kiss</em> is provided as a running and deployable system.  It is
expected that you would modify what&rsquo;s here to suit your application
needs.
</p>
<p>Besides this narrative, you would need the JavaDocs located under the
<code>build/docs/javadoc</code> directory for API specific documentation.
(Which you must generate via <em>Gradle</em> as described. See <a href="#javadoc">Creating JavaDocs</a>.
</p>


<a name="Orientation"></a>
<h2 class="chapter">3 Orientation</h2>


<p>The entire source code comes with the system and is convenient when
debugging, however, only a few areas in the system would normally be
of concern when building an application as follows.
</p>

<a name="Back_002dend-Application-Files"></a>
<h3 class="section">3.1 Back-end Application Files</h3>

<dl compact="compact">
<dt><code>src/main/application/KissInit.groovy</code></dt>
<dd><p>This file is used to configure the system. See <a href="#Setup-And-Configuration">Setup And Configuration</a>
</p></dd>
<dt><code>src/main/application</code></dt>
<dd><p>All other files under this directory represent the application
back-end.  All the files are used and distributed in source form.  The
Kiss system compiles them at runtime but does not save the compiled form.
Updates to files under this directory take affect
immediately on a running system.
</p></dd>
</dl>


<a name="Front_002dend-Application-Files"></a>
<h3 class="section">3.2 Front-end Application Files</h3>

<p>Files under the <code>src/main/webapp</code> directory represent the
front-end of the application.
</p>
<p>All files under the <code>src/main/webapp/kiss</code> directory are part of
the <em>Kiss</em> system and would normally not need to be touched.
</p>
<p><code>index.html</code> and <code>index.js</code> are also part of the <em>Kiss</em>
system and aren&rsquo;t normally modified.
</p>
<p><code>login.html</code> and <code>login.js</code> represent the user login page
and would be modified to suit your needs.
</p>
<p>Other directories such as <code>page1</code> represent other user pages and
would be the application specific screens you create.  The included
<code>page1</code> directory is only an example page.
</p>

<a name="Single-Page-Application"></a>
<h3 class="section">3.3 Single Page Application</h3>

<p><em>Kiss</em> applications are single page applications in the sense
that there is a single <code>&lt;body&gt;</code> tag and all other pages
essentially get placed into that tag on a single page.  However,
<em>Kiss</em> is not a single page application in the sense that the
entire application gets loaded with a single <code>GET</code> request.  This
doesn&rsquo;t make sense for a large business application in which many
hundreds of pages may exist.  <em>Kiss</em> lazy-loads pages as they are
used, and except for browser cache, eliminates them once another page
is loaded.
</p>
<a name="Controlling-Browser-Cache"></a>
<h3 class="section">3.4 Controlling Browser Cache</h3>

<p>The user&rsquo;s browser cache can be controlled from the file <code>src/main/webapp/index.html</code>  In that file you will see two lines that look as follows:
</p>
<div class="example">
<pre class="example">var softwareVersion = &quot;1&quot;;  // version of the entire system
var controlCache = false;   // normally true but use false during 
                            // debugging
</pre></div>

<p>If <code>controlCache</code> is set to <code>true</code>, each time <code>softwareVersion</code>
is incremented all users starting the application will be forced to
load new code from the server and not use their browser&rsquo;s cache.  Once
they download the new version, normal browser cache activity will
occur.
</p>

<a name="javadoc"></a><a name="Creating-JavaDocs"></a>
<h3 class="section">3.5 Creating JavaDocs</h3>

<p>JavaDocs for the <em>Kiss</em> system will need to be created.  It is created from the command line using <em>Gradle</em> by issuing the
following command: 
</p>
<div class="example">
<pre class="example">./gradlew javadoc
</pre></div>

<p>The JavaDoc files end up in the <code>build/docs/javadoc</code> directory.
</p>

<a name="Deploying-A-Kiss-Application"></a>
<h3 class="section">3.6 Deploying A Kiss Application</h3>

<p>The only file needed to deply the application is <code>Kiss.war</code> It
can either be built by your IDE, or at can be build by typing
<code>./gradlew war</code> at a command prompt.  In the case of Gradle,
<code>Kiss.war</code> ends up in the <code>build/libs</code> directory.
</p>
<p>If using <em>tomcat</em>, <code>Kiss.war</code> should be placed in the
<code>webapps</code> directory.  When <em>tomcat</em> starts, it will see the
file, unpack it, and run it.  The application will be available at
<code>[HOST]/Kiss</code>
</p>
<p>Renaming <code>Kiss.war</code> to <code>ABC.war</code>, for example, will cause
the application path to change to <code>[HOST]/ABC</code>
</p>
<a name="Learning-The-System"></a>
<h3 class="section">3.7 Learning The System</h3>

<p>In order to start getting a feel for how <code>Kiss</code> applications
function, in terms of the back-end, look at files in the
<code>src/main/application/services</code> directory.  With <code>Kiss</code> you can
develop applications in several different languages.  The <code>services</code>
example shows the same code in all of the suported languages.
</p>
<p>In terms of the front-end, see the example files under <code>src/main/webapp/page1</code>
</p>


<a name="Developing"></a>
<h2 class="chapter">4 Developing</h2>

<p>This section details the development process with <em>Kiss</em>.  The
details provided will be for intelliJ but can be adapted to other
IDE&rsquo;s.  The use of an IDE is tremendously beneficial because of the
graphical debugging and intelligent code completion capabilities.
</p>
<p>A good development environment includes two separate servers running
on two different ports.  One serves the back-end REST services, and
the other serves the front-end HTML, JavaScript, and CSS files.  This
arrangement allows both front-end and back-end development without any
compiles, server reboots, file copies, or deployments.  Back-end and
front-end files can be edited and saved.  Their changes take effect
immediately.
</p>
<p>Of course, in a production environment, only a single server would be
utilized.
</p>
<a name="Back_002dend-Development"></a>
<h3 class="section">4.1 Back-end Development</h3>

<p>The back-end works differently in development and production
environments.  Although in both environments back-end and front-end
changes take effect immediately, setup of the production environment
copies all files into the production environment, whereas in a
development environment the source and production code are split.  In
order to facilitate rapid and easy development, it is important that
source files be used rather than the production copies during the
development process.  
</p>
<p>The system automatically detects the location of the application
source in all known configurations.  However, this may be explicitly
set via a system environment variable (<code>KISS_DEBUG_ROOT</code>).  The
value of this environment variable should be the absolute path of the
root of the application source code.  The directory it indicates
should have a sub-directory named <code>src/main/application</code>.
</p>


<a name="REST-Server"></a>
<h4 class="subsection">4.1.1 REST Server</h4>

<p>Typically, the IDE manages a tomcat instance and serves up the core
back-end code serving the REST services.  That code detects that it is
running under an IDE and re-routes all back-end application files back
to the source directories.
</p>
<p>Although back-end files are edited in source form and run in compiled
form, back-end code can be debugged (including break-points) as if
they were compiled before the system was booted.
</p>
<p>Once the back-end server is up, application files changed under the
<code>src/main/application</code> directory will take effect immediately.
</p>
<p>The back-end server should be started before the front-end server.
</p>
<a name="Application-Code"></a>
<h4 class="subsection">4.1.2 Application Code</h4>

<p>All communications between the front-end and back-end occur over REST
services you define.  Each REST service exists in its own
file or class.  Web methods are methods within those classes.
</p>
<p>As architected, directories under <code>src/main/application</code>
represent the application&rsquo;s REST services.  Each class / file under that
directory represents a web service.  The name of the class is the name
of the web service.
</p>
<p>Instance methods within the web service class represent REST methods
for that web service.  Each web method is passed four arguments as follows:
</p>
<dl compact="compact">
<dt><code>JSONObject injson</code></dt>
<dd><p>This represents the data that came from the front-end.
</p></dd>
<dt><code>JSONObject outjson</code></dt>
<dd><p>This represents the data being returned to the front-end.  It is pre-initialized with an empty <code>JSONObject</code>.
</p></dd>
<dt><code>Connection db</code></dt>
<dd><p>This is a pre-opened connection to the defined database (defined in <code>application/KissInit.groovy</code>)
</p></dd>
<dt><code>MainServlet servlet</code></dt>
<dd><p>This is a rarely used servlet context argument.
</p></dd>
</dl>

<p>Basically what happens is:
</p>
<ol>
<li> The front-end makes a REST service call.
</li><li> The <code>Kiss</code> back-end receives the request.
</li><li> The user gets authenticated.
</li><li> A new database connection is formed, and a new database transaction is started.
</li><li> The requested web service is identified (and loaded and compiled if needed).
</li><li> The <code>outjson</code> object that is filled in by the web service that is to be returned to the front-end.
</li><li> Upon completion of the REST service, <em>Kiss</em> commits the transaction, closes the databse connection, and returns <code>outjson</code> to the front-end.
</li><li> If, however, the REST service threw an exception, <em>Kiss</em> rolls back the transaction, closes the database, and sends an error return to the front-end.
</li></ol>

<p>Additional class and instance methods, that are not web methods, may
be defined and used within web service classes.
</p>
<p>Of course during this process, <code>Kiss</code> handles many possible error conditions.
</p>
<a name="Programming-Languages"></a>
<h4 class="subsection">4.1.3 Programming Languages</h4>

<p>At this point, <em>Kiss</em> supports the develpment of back-end REST
services in the Java, Groovy, or Common Lisp languages.  Groovy was
added first because it was easy, worked with the IDE well, and did all
that was needed.  Java was added simply due to its natural integration
with the rest of the system.
</p>
<p>With <em>Kiss</em>, different web services can be written in different
languages.  You are not forced to use one or the other.
</p>
<p>Common Lisp (ABCL) was added due to this author&rsquo;s love of that
language.  Unlike Groovy and Java, Lisp has an impedence mismatch with
the core <em>Kiss</em> system that is written in Java.  For example, in
Java, one can have two methods with the same name in the same class
that differ only by their argument types.  This is not part of the
Common Lisp language.  Also, the foreign function interface in Lisp
requires some Lisp code to make the connection clear.  Due to this
connection code having to run, the Lisp interface is very slow on the
first call.  It is, however, reasonably fast on all subsequent calls.
The code that interfaces Java to Lisp is under the
<code>src/main/java/org/kissweb/lisp</code> directory.
</p>
<p>Do to the easy and natural connection between Java and many other JVM
languages, interfaces to those languages is very easy.  It is
anticipated that support for many of these other languages (such as
Scala, Clojure, JRuby, Jython, and Kotlin) will likely follow,
especially if there are requests.
</p>
<a name="Front_002dend-Development"></a><a name="Front_002dend-Development-1"></a>
<h3 class="section">4.2 Front-end Development</h3>

<p>The front-end can be debugged through your browser debugger (F12 on Chrome).
</p>
<p>A separate server is used so that development files will be served
rather than the front-end that was present when the back-end server
was started.  In order to make this work, there are two steps that
need to be followed.
</p>
<ol>
<li> The front-end needs to know where the back-end is located.  This is controlled in the file <code>src/main/webapp/index.js</code>.
That file contains a line that looks as follows:
<div class="example">
<pre class="example">    Server.setURL('http://localhost:8080');
</pre></div>
<p>As shipped, that setting should be good in most cases.  Adjust as needed.
</p></li><li> A server needs to be running to serve the front-end code.  The
<em>Kiss</em> system comes with a simple server that performs this
function.  It is in a file named <code>SimpleWebServer.jar</code> on the
root of the <em>Kiss</em> system.  From the root of the <em>Kiss</em>
system, run the following command to run the front-end server:
<div class="example">
<pre class="example">   ./serve
</pre></div>
<p>or on Windows:
</p><div class="example">
<pre class="example">   serve.cmd
</pre></div>
</li></ol>

<p>The back-end server should be started before the front-end server.
</p>
<p>Once the front-end server is up, you can access the development
environment through your browser at <code>http://localhost:8000</code>
</p>
<p>If you disable the browser cache, changes you make to the front-end
will appear by just reloading the page.  On Chrome, for example, the
browser cache can be turned off by going into the page debugger (F12),
then <code>settings</code>, and then select <code>Disable cache (while
DevTools is open)</code>
</p>
<p>You can now develop the front-end portion of your application by
editing files under the <code>src/main/webapp</code> directory.
</p>
<a name="Reports-And-Exports"></a>
<h3 class="section">4.3 Reports And Exports</h3>

<p>Creating reports and exports requires both front-end and back-end components.
The back-end usually creates the file to be sent to the front-end.  It then returns
a path that the front-end can use to download the file.
</p>
<p><em>Kiss</em> provides the infrastructure needed to support this facility.
<em>Kiss</em> also manages and cleans up report files that are no longer needed.
</p>
<p>In terms of producing reports, <em>Kiss</em> leverages the facilities
provided by the common groff/tbl/mm utilities publicly available.
These facilities automatically handle paging, titles, page numbering,
tables, and overall formatting of your reports. See
<a href="https://www.gnu.org/software/groff">https://www.gnu.org/software/groff</a>
</p>
<p>In terms of producing CSV export files, see the back-end
<code>DelimitedFileWriter</code> class.
</p>
<p>When files are produced by the back-end, they are sent to the
front-end by just providing the URL to the file.  At that point, the
front-end <code>Utils.showReport</code> takes the URL returned by the back-end
and downloads the file.
</p>


<a name="Front_002dend-API"></a>
<h2 class="chapter">5 Front-end API</h2>

<p>The front-end API are all the facilities that run on the browser.
This includes HTML, CSS, JavaScript, image files, etc.  The <em>Kiss</em>
back-end does not produce or modify HTML or JavaScript code.  These
files are served, unaltered, by the server as they are on the back-end
disk.  The <code>Kiss</code> model is that the browser receives these files
from the server, and that they include all the code that the browser
needs to perform its function.  Besides these static files, all data
is communicated between the back-end and front-end via REST services.
</p>
<p>Having all of the display logic running on the front-end or user&rsquo;s
browser makes a lot of sense for the following reasons:
</p>
<ol>
<li> Minimize the dependence the front-end and back-end have on each other.  This means that one end can be changed without necessitating
the need for the other to change.  In other words, they are minimally dependent on each other.
<ol type="a" start="1">
<li> In this rapidly changing environment, minimizing dependencies means minimizing the amount of code that has to be changed as technology changes.
</li><li> Code is easier to understand and maintain since you don&rsquo;t have four totally different languages in the same file.
</li></ol>
</li><li> Push as much processing to the client side so that the back-end can scale easier.
</li></ol>

<p>All of this leads to the following:
</p><ol>
<li> Shorter development time
</li><li> Easier to maintain
</li><li> Be most prepared for future changes
</li><li> Reduces server costs
</li><li> Reduced development time and cost
</li></ol>

<p>The front-end API is documented in the file <code>manual/jsdoc/index.html</code>.
</p>


<a name="Calling-REST-Services"></a>
<h3 class="section">5.1 Calling REST Services</h3>

<p>On the front-end, the class <code>Server</code> is what deals with the REST
communications between the front-end and back-end.  In it, there are a
handful of methods that deal with the environment such as the back-end
URL.  All communications between the back-end and front-end are done
with JSON.
</p>
<p>The way it works is the login service requires a user name and
password, and it returns a login token (uuid).  That token is used in
all future calls, and it gets automatically invalidated after a certain
amount of non-use time.  There is no state kept on the back-end.  Each
REST call must login to the back-end with the provided token in order
to be authenticated to communicate.
</p>
<p>The method used to communicate is named <code>Server.call()</code>. It is passed the
path to the REST service, the REST service method name, and a JSON
object that is send to the back-end method.  A <code>Promise</code> is
returned that is used to obtain the result of the call.  This
can also be used with <code>async/await</code>.
</p>
<p>There is also a <code>logout</code> method that simply erases the
login token so that future communications cannot occur.
</p>
<p>The <code>Server</code> class also includes a method (<code>fileUploadSend</code>)
that makes it easy to upload files.
</p>
<a name="Kiss-Components"></a>
<h3 class="section">5.2 Kiss Components</h3>


<p>Although HTML provides what is needed for real applications, it
provides those facilities in too low a level to be useful without a
lot of custom code.  Custom components (tags) allow you to encapsulate
that advanced behavior into what is used as and appears as native
functionality.
</p>
<p><em>Kiss</em> provides the ability to create your own custom HTML tags
or elements as well as use those provided by <em>Kiss</em>.  There are
two principal user methods that make this work.
<code>Utils.useComponent</code> is used to load either a <em>Kiss</em> defined
component or one you define yourself (there is no difference).  This
loads the JavaScript file that defines the new tag.  All of the
components that come with the <em>Kiss</em> system are under the
<code>src/main/webapp/kiss/component</code> directory.  You can see those
files for examples of how custom tags are defined.
</p>
<p>New application pages are loaded with the <code>Utils.loadPage</code>
method.  In addition to loading the HTML and JavaScript code
associated with that page, this method performs the processing
necessary to make the components work.  It does this intelligently so
that, for example, one component can use another component without any
special loading order requirement.
</p>
<p>Briefly, the code that describes the custom tag must describe what the
tag is replaced with.  Ultimately, it must boil down to straight HTML,
CSS, and JavaScript code.
</p>

<a name="Tagless-Components"></a>
<h4 class="subsection">5.2.1 Tagless Components</h4>

<p>Let&rsquo;s say you have a pop-up window that allows a user to search for employees, or product, or whatever.
The user gets a variety of search capabilities and the selected item is returned. Let&rsquo;s further say
that you need this functionality in several places within your application.  These are tagless
components.  They aren&rsquo;t placed with a custom tag.  They are a response to an event like a button push.
Tagless components allow you to encapsulate a block of functionality (including pop-up windows) into
a neat package that can be re-used in any number of places.
</p>
<p>The method used to load tagless components is
<code>Utils.useTaglessComponent</code>.  Later, when the tagless component
is needed, one would execute <code>Kiss.MyComponent.run(in_data, on_exit)</code> (where
<code>MyComponent</code> is the name of your tagless component.  
<code>in_data</code> represents possible data passed to the component on entry.
<code>on_exit</code> is a function that gets executed when the component exits.
Arguments passed to <code>on_exit</code> are determined by the component.
</p>

<a name="Modal-Popup-Windows"></a>
<h3 class="section">5.3 Modal Popup Windows</h3>

<p><em>Kiss</em> supports dragable, modal popup windows. <em>HTML</em> is used to describe the layout of the popup, and JavaScript is used
to control the appearance of the popup.
</p>
<p>The <em>HTML</em> portion is represented as a top-level <code>div</code> that represents the entire popup.  Withing the top-level
<code>div</code> there most be two child <code>div</code>&rsquo;s.  The first represents the single line header, and the second represents
the body of the grid.
</p>
<p>The top-level <code>div</code> attribute section must contain the following:
</p>
<dl compact="compact">
<dt><code>id=&quot;my-popup&quot;</code></dt>
<dd><p>an ID is needed to reference the popup
</p></dd>
<dt><code>style=&quot;width: 600px; height: 300px;&quot;</code></dt>
<dd><p>Set the height and width of the popup
</p></dd>
<dt><code>hidden</code></dt>
<dd><p>be sure the popup doesn&rsquo;t appear until requested
</p></dd>
</dl>

<p>An examples is as follows:
</p>
<div class="example">
<pre class="example">&lt;div id=&quot;my-popup&quot; style=&quot;width: 600px; height: 300px;&quot; hidden&gt;
    &lt;div&gt;The title&lt;/div&gt;
    &lt;div&gt;
        The content
        &lt;div style=&quot;display: inline-block; position: absolute; bottom: 20px; right: 20px;&quot;&gt;
            &lt;push-button id=&quot;cancel&quot; style=&quot;margin-left: 15px;&quot;&gt;Cancel&lt;/push-button&gt;
            &lt;push-button id=&quot;ok&quot; style=&quot;margin-left: 15px;&quot;&gt;Ok&lt;/push-button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre></div>

<p>There are only two JavaScript functions used to control the popup.
</p>
<dl compact="compact">
<dt><code>Utils.popup_open(id [, focus-id])</code></dt>
<dd><p>open the popup indicated by the <code>id</code>, and if <code>focus-id</code> is present, set initial focus to that control
</p></dd>
<dt><code>Utils.popup_close(id)</code></dt>
<dd><p>close the popup indicated by the <code>id</code>
</p></dd>
</dl>

<p>Your defined responses to the buttons on the popup determines your dealing with the
data on the popup and when to close it.
</p>
<a name="File-Uploads"></a>
<h3 class="section">5.4 File Uploads</h3>

<p><em>Kiss</em> includes facilities that make it easy to upload a file or
multiple files.  The way to use it is as follows:
</p>
<p>The HTML would contain two controls; a file input and a button.  The file
input looks as follows:
</p>
<div class="example">
<pre class="example">&lt;input id=&quot;myUpload&quot; type=&quot;file&quot;&gt;
</pre></div>

<p>The file input control allows the user to select the file or files to
be uploaded.  If multiple files are to be allowed the <code>multiple</code>
attribute should be added to the HTML.
</p>
<p>The button is used to activate the upload process.  Your code that
sends the file(s) to the server should be attached to this button.
</p>
<p>The <code>Utils</code> class contains the helper functions <code>getFileUploadCount</code>
and <code>getFileUploadFormData</code>, and the main function used to
send the files is <code>fileUploadSend</code> in the <code>Server</code> class.
The code would look like the following:
</p>
<div class="example">
<pre class="example">if (!Utils.getFileUploadCount('myUpload')) {
    Utils.showMessage(&quot;Error&quot;, &quot;No file specified.&quot;);
    return;
}
let data = Utils.getFileUploadFormData('myUpload');

data.append('add1', miscAdditionalData);  // misc data
data.append('add2', miscAdditionalData2); // misc data

Server.fileUploadSend('TheService', 'theMethod', data);
</pre></div>

<p>Back-end code would look like this:
</p>
<div class="example">
<pre class="example">public void theMethod(JSONObject inJson, JSONObject outJson, MainServlet servlet) throws Exception {
    String add1 = inJson.getString(&quot;add1&quot;);
    String add2 = inJson.getString(&quot;add2&quot;);
    if (servlet.getUploadFileCount() == 0)
        throw new Exception(&quot;No file specified.&quot;);
        
    String originalFileName = servlet.getUploadFileName(0);
    
    
    BufferedInputStream bis = servlet.getUploadBufferedInputStream(0);
    // do something with the file stream
    bis.close();
    
         -or-
         
    String localFileName = servlet.saveUploadFile(0);
}
</pre></div>




<a name="Utilities"></a>
<h3 class="section">5.5 Utilities</h3>

<p><em>Kiss</em> includes an ever-growing set of utilities to help deal with common tasks.
These utilities are located under the <code>src/main/webapp/kiss</code> directory and have names such as
<code>DateTimeUtils.js</code>, <code>DateUtils</code>, <code>TimeUtils</code>, <code>Utils</code>, etc.  These utilities
are documented in the front-end API documentation.
</p>
<a name="Controlling-Browser-Cache-1"></a>
<h3 class="section">5.6 Controlling Browser Cache</h3>

<p>Browser&rsquo;s have a mind of their own in term of deciding when to use
their cache for a file and when to download a new one.  This can cause
no end of trouble when code gets changed.  Some user files end up
being old from the browser cache, and others are freshly downloaded.
The old and new files don&rsquo;t agree with each other and all sorts of
errors occur.
</p>
<p><em>Kiss</em> includes a facility to assure that all files are
downloaded afresh whenever the application changes while still taking
maximal advantage of the browser cache when the files have not
changed.  The only cost for this capability is the requirement
that the <code>index.html</code> file <em>always</em> gets loaded afresh.
To that end, <em>Kiss</em> has code to ignore browser cache and always load
<code>index.html</code> afresh.
</p>
<p><code>index.html</code> contains two variables names <code>softwareVersion</code> and <code>controlCache</code>.
Assuming <code>controlCache</code> is <code>true</code>, <em>Kiss</em> has code that forces the browser
to re-load all files whenever <code>softwareVersion</code> changes.  After the code is re-loaded,
the browser cache will work as normal to maximally cache the files until the next
<code>softwareVersion</code> change.
</p>
<a name="Additional-Resources"></a>
<h3 class="section">5.7 Additional Resources</h3>

<p>Although not a part of the <em>Kiss</em> system, there are some very valuable technologies and libraries that
have been used with <em>Kiss</em> in order to create some very powerful solutions.
</p>
<p>The first is the Lovefield library that adds SQL capabilities on the browser side.  Data is persisted on the user&rsquo;s browser
and remains through browser or machine re-boots.  The library is located at <a href="https://github.com/google/lovefield">https://github.com/google/lovefield</a>
</p>
<p>A recent technology that has been used to enable browser application that run when there is no Internet connection
is called <em>Service Workers</em>.
</p>



<a name="Back_002dend-API"></a>
<h2 class="chapter">6 Back-end API</h2>

<p>In addition to the full API provided by the Java system, and any additional
JAR files you add, <em>Kiss</em> comes with an API that assists with the
development of business application with <em>Kiss</em>.  These 
API&rsquo;s may be broadly grouped as follows:
</p>
<ol>
<li> Database API
</li><li> JSON API
</li><li> Utilities
</li></ol>

<p>An overview of these API&rsquo;s is contained in this chapter.  Detailed
documentation is contained in the JavaDocs.  See <a href="#javadoc">Creating JavaDocs</a>.
</p>
<a name="Database-API"></a>
<h3 class="section">6.1 Database API</h3>

<p><em>Kiss</em> comes with a powerful library for accessing SQL databases.
Code for this is located under <code>org.kissweb.database</code> It is
currently being used in production environments.  This API provides
the following benefits:
</p>
<ul>
<li> Automatic connection and statement pooling
</li><li> Vastly simpler API than bare JDBC
</li><li> Handling of parameterized arguments
</li><li> Auto generation of SQL for single record adds, edits, and deletions
</li><li> Auto handling for cases of cursor interference on nested queries
</li><li> Supports transactions out-of-the-box
</li></ul>

<p>As shipped, this library supports PostgreSQL, Microsoft Server, Oracle, MySQL, and SQLite.
</p>
<p>The detailed documentation for the database utilities are in the
JavaDocs which you must generate. (See <a href="#javadoc">Creating JavaDocs</a>.) This section provides an overview.
</p>
<p>The <em>Kiss</em> database routines revolve around four main classes as follows:
</p>
<dl compact="compact">
<dt><code>Connection</code></dt>
<dd><p>This represents a connection to an SQL database.
</p></dd>
<dt><code>Command</code></dt>
<dd><p>This represents a single action or command against the database.
</p></dd>
<dt><code>Cursor</code></dt>
<dd><p>If the action is a <code>select</code>, the <code>Cursor</code> represents a pointer into the result set.
</p></dd>
<dt><code>Record</code></dt>
<dd><p>This class represents a single row within a table or result set.
</p></dd>
</dl>

<p>The <code>Connection</code> class contains several convenience methods that
are used in simple cases where only a single action is being
performed.  These methods should not be used when multiple
simultaneous actions are taking place at once (by that single thread).
This issue is not a problem in multi-user or multi-threaded
situations.  It is only a problem when a single thread is doing one
action while another action is still open.
</p>
<p>You will notice that your REST services are passed a <em>Connection</em>
argument.  <em>Kiss</em> automatically forms a unique connection for
each REST service call and closes it when the call is done.
Therefore, you will not normally need to create your own connection.
Additionally, <em>Kiss</em> automatically starts a new transaction with
each REST service and commits it when the service is done.  However,
if the service throws any exception, the transaction is rolled back
instead.
</p>
<p>You would not normally write SQL for single record adds, updates, and
deletes.  Using the <em>Record</em> API, <code>Kiss</code> automatically
generates these statements for you.
</p>
<p>In addition to the above, these utilities provide full support for transactions and parameters.
</p>
<a name="JSON"></a>
<h3 class="section">6.2 JSON</h3>

<p>The first two arguments to all REST methods is <code>injson</code> and
<code>outjson</code>.  <code>injson</code> is a <code>JSONObject</code> that contains
the data passed in <em>from</em> the front-end.  <code>outjson</code> is a
pre-initialized, empty <code>JSONObject</code> that will be <em>returned
to</em> the front-end.  The rest service should read the data passed in
from <code>injson</code>, perform any needed processes, and put the result
into <code>outjson</code> to be returned to the front-end.
</p>
<p>A modified version of a publicly available JSON Java package is
included and used to access JSON from the front-end and create JSON to
return to the front-end.  This package has many methods but only a few are
commonly used.
</p>
<p>There are two main data type of interest.  They are <code>JSONObject</code> and
<code>JSONArray</code>.  They hold the JSON types indicated by their names.
</p>
<p>Command useful for getting data out of <code>injson</code>:
</p>
<ul>
<li> JSONObject.has(String key)
</li><li> JSONObject.getString(String key)
</li><li> JSONObject.getBoolean(String key)
</li><li> JSONObject.getInt(String key)
</li><li> JSONObject.getLong(String key)
</li><li> JSONObject.getDouble(String key)
</li><li> JSONObject.getFloat(String key)
</li><li> JSONObject.getJSONArray(String key)
</li><li> JSONArray.length()
</li><li> JSONArray.getString(int index)
</li><li> JSONArray.getBoolean(int index)
</li><li> JSONArray.getInt(int index)
</li><li> JSONArray.getLong(int index)
</li><li> JSONArray.getFloat(int index)
</li><li> JSONArray.getDouble(int index)
</li><li> JSONArray.getString(int index)
</li><li> JSONArray.getJSONArray(int index)
</li></ul>

<p>Again, <code>outjson</code> is supplied as a pre-initialized, but empty,
<code>JSONObject</code>.  It is up to the REST service code to populate it
with the return data.  Useful JSON utilities include the following:
</p>
<ul>
<li> JSONObject.put(String label, Object data)
</li><li> new JSONObject()
</li><li> new JSONArray()
</li><li> JSONArray.put(Object obj)
</li></ul>


<a name="Utilities-1"></a>
<h3 class="section">6.3 Utilities</h3>

<p><em>Kiss</em> includes an ever-growing set of utilities to help deal with common tasks.
These utilities are located under the <code>src/main/java/org/kissweb</code> directory and have names such as
<code>DateTime.java</code>, <code>NumberFormat</code>, etc.  These utilities
are documented in the JavaDocs.
</p>

<a name="Method_002c-Macro_002c-Function-And-Variable-Index"></a>
<h2 class="unnumbered">Method, Macro, Function And Variable Index</h2>

<hr>



</body>
</html>
