<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>DOMUtils.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AGGrid.html">AGGrid</a><ul class='methods'><li data-type='method'><a href="AGGrid.html#addComponent">addComponent</a></li><li data-type='method'><a href="AGGrid.html#addRecord">addRecord</a></li><li data-type='method'><a href="AGGrid.html#addRecords">addRecords</a></li><li data-type='method'><a href="AGGrid.html#clear">clear</a></li><li data-type='method'><a href="AGGrid.html#clearSelection">clearSelection</a></li><li data-type='method'><a href="AGGrid.html#columnShow">columnShow</a></li><li data-type='method'><a href="AGGrid.html#deleteRow">deleteRow</a></li><li data-type='method'><a href="AGGrid.html#deleteRowIndex">deleteRowIndex</a></li><li data-type='method'><a href="AGGrid.html#deleteSelectedRows">deleteSelectedRows</a></li><li data-type='method'><a href="AGGrid.html#deselectAll">deselectAll</a></li><li data-type='method'><a href="AGGrid.html#destroy">destroy</a></li><li data-type='method'><a href="AGGrid.html#disable">disable</a></li><li data-type='method'><a href="AGGrid.html#enable">enable</a></li><li data-type='method'><a href="AGGrid.html#getAllRows">getAllRows</a></li><li data-type='method'><a href="AGGrid.html#getFirstRow">getFirstRow</a></li><li data-type='method'><a href="AGGrid.html#getLastRow">getLastRow</a></li><li data-type='method'><a href="AGGrid.html#getNumberOfRows">getNumberOfRows</a></li><li data-type='method'><a href="AGGrid.html#getRowAtIndex">getRowAtIndex</a></li><li data-type='method'><a href="AGGrid.html#getSelectedRow">getSelectedRow</a></li><li data-type='method'><a href="AGGrid.html#getSelectedRowIndex">getSelectedRowIndex</a></li><li data-type='method'><a href="AGGrid.html#getSelectedRowIndexes">getSelectedRowIndexes</a></li><li data-type='method'><a href="AGGrid.html#getSelectedRows">getSelectedRows</a></li><li data-type='method'><a href="AGGrid.html#highlightRows">highlightRows</a></li><li data-type='method'><a href="AGGrid.html#isEmpty">isEmpty</a></li><li data-type='method'><a href="AGGrid.html#multiSelect">multiSelect</a></li><li data-type='method'><a href="AGGrid.html#noRowSelection">noRowSelection</a></li><li data-type='method'><a href="AGGrid.html#numberOfSelectedRows">numberOfSelectedRows</a></li><li data-type='method'><a href="AGGrid.html#rowStyleFunction">rowStyleFunction</a></li><li data-type='method'><a href="AGGrid.html#selectId">selectId</a></li><li data-type='method'><a href="AGGrid.html#setDragFunction">setDragFunction</a></li><li data-type='method'><a href="AGGrid.html#setOnRowDoubleClicked">setOnRowDoubleClicked</a></li><li data-type='method'><a href="AGGrid.html#setOnSelectionChanged">setOnSelectionChanged</a></li><li data-type='method'><a href="AGGrid.html#setRowData">setRowData</a></li><li data-type='method'><a href="AGGrid.html#show">show</a></li><li data-type='method'><a href="AGGrid.html#updateSelectedRecord">updateSelectedRecord</a></li><li data-type='method'><a href="AGGrid.html#.addGrid">addGrid</a></li><li data-type='method'><a href="AGGrid.html#.date">date</a></li><li data-type='method'><a href="AGGrid.html#.dateTime">dateTime</a></li><li data-type='method'><a href="AGGrid.html#.newGridContext">newGridContext</a></li><li data-type='method'><a href="AGGrid.html#.numericFormat">numericFormat</a></li><li data-type='method'><a href="AGGrid.html#.popAllGridContexts">popAllGridContexts</a></li><li data-type='method'><a href="AGGrid.html#.popGridContext">popGridContext</a></li><li data-type='method'><a href="AGGrid.html#.time">time</a></li></ul></li><li><a href="DateTimeUtils.html">DateTimeUtils</a><ul class='methods'><li data-type='method'><a href="DateTimeUtils.html#.addDays">addDays</a></li><li data-type='method'><a href="DateTimeUtils.html#.addHours">addHours</a></li><li data-type='method'><a href="DateTimeUtils.html#.addHours">addHours</a></li><li data-type='method'><a href="DateTimeUtils.html#.addMinutes">addMinutes</a></li><li data-type='method'><a href="DateTimeUtils.html#.addMinutes">addMinutes</a></li><li data-type='method'><a href="DateTimeUtils.html#.addMonths">addMonths</a></li><li data-type='method'><a href="DateTimeUtils.html#.addYears">addYears</a></li><li data-type='method'><a href="DateTimeUtils.html#.create">create</a></li><li data-type='method'><a href="DateTimeUtils.html#.createDate">createDate</a></li><li data-type='method'><a href="DateTimeUtils.html#.dateOnlyEpoch">dateOnlyEpoch</a></li><li data-type='method'><a href="DateTimeUtils.html#.dateToStd">dateToStd</a></li><li data-type='method'><a href="DateTimeUtils.html#.diffMinutes">diffMinutes</a></li><li data-type='method'><a href="DateTimeUtils.html#.displayEpochToEpoch">displayEpochToEpoch</a></li><li data-type='method'><a href="DateTimeUtils.html#.epochFromDateAndTime">epochFromDateAndTime</a></li><li data-type='method'><a href="DateTimeUtils.html#.epochToDisplayEpoch">epochToDisplayEpoch</a></li><li data-type='method'><a href="DateTimeUtils.html#.formatDate">formatDate</a></li><li data-type='method'><a href="DateTimeUtils.html#.formatDateLong">formatDateLong</a></li><li data-type='method'><a href="DateTimeUtils.html#.formatDateTime">formatDateTime</a></li><li data-type='method'><a href="DateTimeUtils.html#.getDate">getDate</a></li><li data-type='method'><a href="DateTimeUtils.html#.getLocalTimezoneLongText">getLocalTimezoneLongText</a></li><li data-type='method'><a href="DateTimeUtils.html#.getLocalTimezoneShortText">getLocalTimezoneShortText</a></li><li data-type='method'><a href="DateTimeUtils.html#.getTime">getTime</a></li><li data-type='method'><a href="DateTimeUtils.html#.getTimeZoneOffsetMs">getTimeZoneOffsetMs</a></li><li data-type='method'><a href="DateTimeUtils.html#.localZone">localZone</a></li><li data-type='method'><a href="DateTimeUtils.html#.newYmdhm">newYmdhm</a></li><li data-type='method'><a href="DateTimeUtils.html#.now">now</a></li><li data-type='method'><a href="DateTimeUtils.html#.stdToDate">stdToDate</a></li><li data-type='method'><a href="DateTimeUtils.html#.timeOnlyEpoch">timeOnlyEpoch</a></li><li data-type='method'><a href="DateTimeUtils.html#.toDate">toDate</a></li><li data-type='method'><a href="DateTimeUtils.html#.toEpoch">toEpoch</a></li><li data-type='method'><a href="DateTimeUtils.html#.toIntDate">toIntDate</a></li><li data-type='method'><a href="DateTimeUtils.html#.toIntTime">toIntTime</a></li><li data-type='method'><a href="DateTimeUtils.html#.toMilliseconds">toMilliseconds</a></li><li data-type='method'><a href="DateTimeUtils.html#.toYmdhm">toYmdhm</a></li></ul></li><li><a href="DateUtils.html">DateUtils</a><ul class='methods'><li data-type='method'><a href="DateUtils.html#.SQLtoInt">SQLtoInt</a></li><li data-type='method'><a href="DateUtils.html#.calendar">calendar</a></li><li data-type='method'><a href="DateUtils.html#.dateAddDays">dateAddDays</a></li><li data-type='method'><a href="DateUtils.html#.dateToInt">dateToInt</a></li><li data-type='method'><a href="DateUtils.html#.day">day</a></li><li data-type='method'><a href="DateUtils.html#.dayOfWeek">dayOfWeek</a></li><li data-type='method'><a href="DateUtils.html#.dayOfWeekName">dayOfWeekName</a></li><li data-type='method'><a href="DateUtils.html#.daysDifference">daysDifference</a></li><li data-type='method'><a href="DateUtils.html#.detectDateFormat">detectDateFormat</a></li><li data-type='method'><a href="DateUtils.html#.intAddDays">intAddDays</a></li><li data-type='method'><a href="DateUtils.html#.intToDate">intToDate</a></li><li data-type='method'><a href="DateUtils.html#.intToSQL">intToSQL</a></li><li data-type='method'><a href="DateUtils.html#.intToStr2">intToStr2</a></li><li data-type='method'><a href="DateUtils.html#.intToStr4">intToStr4</a></li><li data-type='method'><a href="DateUtils.html#.isSQLDate">isSQLDate</a></li><li data-type='method'><a href="DateUtils.html#.isValid">isValid</a></li><li data-type='method'><a href="DateUtils.html#.julian">julian</a></li><li data-type='method'><a href="DateUtils.html#.longFormat">longFormat</a></li><li data-type='method'><a href="DateUtils.html#.millsToInt">millsToInt</a></li><li data-type='method'><a href="DateUtils.html#.month">month</a></li><li data-type='method'><a href="DateUtils.html#.monthName">monthName</a></li><li data-type='method'><a href="DateUtils.html#.monthsDifference">monthsDifference</a></li><li data-type='method'><a href="DateUtils.html#.strToInt">strToInt</a></li><li data-type='method'><a href="DateUtils.html#.toInt">toInt</a></li><li data-type='method'><a href="DateUtils.html#.today">today</a></li><li data-type='method'><a href="DateUtils.html#.year">year</a></li></ul></li><li><a href="Editor.html">Editor</a><ul class='methods'><li data-type='method'><a href="Editor.html#clear">clear</a></li><li data-type='method'><a href="Editor.html#dispose">dispose</a></li><li data-type='method'><a href="Editor.html#getHtml">getHtml</a></li><li data-type='method'><a href="Editor.html#getText">getText</a></li><li data-type='method'><a href="Editor.html#printEditorContent">printEditorContent</a></li><li data-type='method'><a href="Editor.html#readOnly">readOnly</a></li><li data-type='method'><a href="Editor.html#readWrite">readWrite</a></li><li data-type='method'><a href="Editor.html#setHtml">setHtml</a></li><li data-type='method'><a href="Editor.html#.addEditor">addEditor</a></li><li data-type='method'><a href="Editor.html#.create">create</a></li><li data-type='method'><a href="Editor.html#.newEditorContext">newEditorContext</a></li><li data-type='method'><a href="Editor.html#.popAllEditorContexts">popAllEditorContexts</a></li><li data-type='method'><a href="Editor.html#.popEditorContext">popEditorContext</a></li></ul></li><li><a href="MutableString.html">MutableString</a><ul class='methods'><li data-type='method'><a href="MutableString.html#append">append</a></li><li data-type='method'><a href="MutableString.html#charAt">charAt</a></li><li data-type='method'><a href="MutableString.html#clear">clear</a></li><li data-type='method'><a href="MutableString.html#delete">delete</a></li><li data-type='method'><a href="MutableString.html#insert">insert</a></li><li data-type='method'><a href="MutableString.html#length">length</a></li><li data-type='method'><a href="MutableString.html#prepend">prepend</a></li><li data-type='method'><a href="MutableString.html#removeFromEnd">removeFromEnd</a></li><li data-type='method'><a href="MutableString.html#removeFromStart">removeFromStart</a></li><li data-type='method'><a href="MutableString.html#replace">replace</a></li><li data-type='method'><a href="MutableString.html#setCharAt">setCharAt</a></li><li data-type='method'><a href="MutableString.html#toString">toString</a></li></ul></li><li><a href="NumberUtils.html">NumberUtils</a><ul class='methods'><li data-type='method'><a href="NumberUtils.html#.floatEqual">floatEqual</a></li><li data-type='method'><a href="NumberUtils.html#.round">round</a></li><li data-type='method'><a href="NumberUtils.html#.roundDown">roundDown</a></li><li data-type='method'><a href="NumberUtils.html#.roundUp">roundUp</a></li></ul></li><li><a href="Server.html">Server</a><ul class='methods'><li data-type='method'><a href="Server.html#.binaryCall">binaryCall</a></li><li data-type='method'><a href="Server.html#.call">call</a></li><li data-type='method'><a href="Server.html#.callAll">callAll</a></li><li data-type='method'><a href="Server.html#.fileUploadSend">fileUploadSend</a></li><li data-type='method'><a href="Server.html#.logout">logout</a></li><li data-type='method'><a href="Server.html#.setMaxInactivityHours">setMaxInactivityHours</a></li><li data-type='method'><a href="Server.html#.setMaxInactivityMinutes">setMaxInactivityMinutes</a></li><li data-type='method'><a href="Server.html#.setMaxInactivitySeconds">setMaxInactivitySeconds</a></li><li data-type='method'><a href="Server.html#.setURL">setURL</a></li></ul></li><li><a href="TimeUtils.html">TimeUtils</a><ul class='methods'><li data-type='method'><a href="TimeUtils.html#.addHours">addHours</a></li><li data-type='method'><a href="TimeUtils.html#.addMinutes">addMinutes</a></li><li data-type='method'><a href="TimeUtils.html#.current">current</a></li><li data-type='method'><a href="TimeUtils.html#.dateToTime">dateToTime</a></li><li data-type='method'><a href="TimeUtils.html#.diff">diff</a></li><li data-type='method'><a href="TimeUtils.html#.format">format</a></li><li data-type='method'><a href="TimeUtils.html#.formatLong">formatLong</a></li><li data-type='method'><a href="TimeUtils.html#.hours">hours</a></li><li data-type='method'><a href="TimeUtils.html#.isValid">isValid</a></li><li data-type='method'><a href="TimeUtils.html#.millsToInt">millsToInt</a></li><li data-type='method'><a href="TimeUtils.html#.minutes">minutes</a></li><li data-type='method'><a href="TimeUtils.html#.minutesToTime">minutesToTime</a></li><li data-type='method'><a href="TimeUtils.html#.strToInt">strToInt</a></li><li data-type='method'><a href="TimeUtils.html#.toInt">toInt</a></li><li data-type='method'><a href="TimeUtils.html#.totalMinutes">totalMinutes</a></li></ul></li><li><a href="Utils.html">Utils</a><ul class='methods'><li data-type='method'><a href="Utils.html#.appendChild">appendChild</a></li><li data-type='method'><a href="Utils.html#.assureArray">assureArray</a></li><li data-type='method'><a href="Utils.html#.beep">beep</a></li><li data-type='method'><a href="Utils.html#.cleanup">cleanup</a></li><li data-type='method'><a href="Utils.html#.clearAllEnterContexts">clearAllEnterContexts</a></li><li data-type='method'><a href="Utils.html#.clearSomeControlValueChanged">clearSomeControlValueChanged</a></li><li data-type='method'><a href="Utils.html#.cloneArrayShallow">cloneArrayShallow</a></li><li data-type='method'><a href="Utils.html#.convertToArray">convertToArray</a></li><li data-type='method'><a href="Utils.html#.countProperties">countProperties</a></li><li data-type='method'><a href="Utils.html#.didSomeControlValueChange">didSomeControlValueChange</a></li><li data-type='method'><a href="Utils.html#.drop">drop</a></li><li data-type='method'><a href="Utils.html#.eraseChildren">eraseChildren</a></li><li data-type='method'><a href="Utils.html#.fileNameExtension">fileNameExtension</a></li><li data-type='method'><a href="Utils.html#.fixCapitalization">fixCapitalization</a></li><li data-type='method'><a href="Utils.html#.format">format</a></li><li data-type='method'><a href="Utils.html#.formatSsn">formatSsn</a></li><li data-type='method'><a href="Utils.html#.formatb">formatb</a></li><li data-type='method'><a href="Utils.html#.getAndEraseData">getAndEraseData</a></li><li data-type='method'><a href="Utils.html#.getAppUrl">getAppUrl</a></li><li data-type='method'><a href="Utils.html#.getData">getData</a></li><li data-type='method'><a href="Utils.html#.getEmailFromAddressWithName">getEmailFromAddressWithName</a></li><li data-type='method'><a href="Utils.html#.getFileUploadCount">getFileUploadCount</a></li><li data-type='method'><a href="Utils.html#.getFileUploadFormData">getFileUploadFormData</a></li><li data-type='method'><a href="Utils.html#.getLastError">getLastError</a></li><li data-type='method'><a href="Utils.html#.getLastErrorDate">getLastErrorDate</a></li><li data-type='method'><a href="Utils.html#.getLocation">getLocation</a></li><li data-type='method'><a href="Utils.html#.getMilliseconds">getMilliseconds</a></li><li data-type='method'><a href="Utils.html#.getNameFromAddressWithName">getNameFromAddressWithName</a></li><li data-type='method'><a href="Utils.html#.getPageArgv">getPageArgv</a></li><li data-type='method'><a href="Utils.html#.getPageRetv">getPageRetv</a></li><li data-type='method'><a href="Utils.html#.getURLParam">getURLParam</a></li><li data-type='method'><a href="Utils.html#.globalEnterHandler">globalEnterHandler</a></li><li data-type='method'><a href="Utils.html#.htmlToText">htmlToText</a></li><li data-type='method'><a href="Utils.html#.isChangeChar">isChangeChar</a></li><li data-type='method'><a href="Utils.html#.isOnline">isOnline</a></li><li data-type='method'><a href="Utils.html#.isValidDomain">isValidDomain</a></li><li data-type='method'><a href="Utils.html#.isValidEmailAddress">isValidEmailAddress</a></li><li data-type='method'><a href="Utils.html#.isValidEmailAddressWithName">isValidEmailAddressWithName</a></li><li data-type='method'><a href="Utils.html#.isValidSsn">isValidSsn</a></li><li data-type='method'><a href="Utils.html#.keep">keep</a></li><li data-type='method'><a href="Utils.html#.loadPage">loadPage</a></li><li data-type='method'><a href="Utils.html#.makeDraggable">makeDraggable</a></li><li data-type='method'><a href="Utils.html#.newEnterContext">newEnterContext</a></li><li data-type='method'><a href="Utils.html#.openUrl">openUrl</a></li><li data-type='method'><a href="Utils.html#.popEnterContext">popEnterContext</a></li><li data-type='method'><a href="Utils.html#.popPage">popPage</a></li><li data-type='method'><a href="Utils.html#.popup_close">popup_close</a></li><li data-type='method'><a href="Utils.html#.popup_open">popup_open</a></li><li data-type='method'><a href="Utils.html#.popup_set_height">popup_set_height</a></li><li data-type='method'><a href="Utils.html#.popup_set_width">popup_set_width</a></li><li data-type='method'><a href="Utils.html#.pushPage">pushPage</a></li><li data-type='method'><a href="Utils.html#.rescan">rescan</a></li><li data-type='method'><a href="Utils.html#.saveData">saveData</a></li><li data-type='method'><a href="Utils.html#.setEnterFunction">setEnterFunction</a></li><li data-type='method'><a href="Utils.html#.setSomeControlValueChangeFunction">setSomeControlValueChangeFunction</a></li><li data-type='method'><a href="Utils.html#.showMessage">showMessage</a></li><li data-type='method'><a href="Utils.html#.showReport">showReport</a></li><li data-type='method'><a href="Utils.html#.someControlValueChanged">someControlValueChanged</a></li><li data-type='method'><a href="Utils.html#.splitEmailAddresses">splitEmailAddresses</a></li><li data-type='method'><a href="Utils.html#.take">take</a></li><li data-type='method'><a href="Utils.html#.textToHtml">textToHtml</a></li><li data-type='method'><a href="Utils.html#.toASCII">toASCII</a></li><li data-type='method'><a href="Utils.html#.toBase64">toBase64</a></li><li data-type='method'><a href="Utils.html#.toNumber">toNumber</a></li><li data-type='method'><a href="Utils.html#.toggleFullscreen">toggleFullscreen</a></li><li data-type='method'><a href="Utils.html#.useComponent">useComponent</a></li><li data-type='method'><a href="Utils.html#.useTaglessComponent">useTaglessComponent</a></li><li data-type='method'><a href="Utils.html#.uuid">uuid</a></li><li data-type='method'><a href="Utils.html#.waitMessage">waitMessage</a></li><li data-type='method'><a href="Utils.html#.waitMessageEnd">waitMessageEnd</a></li><li data-type='method'><a href="Utils.html#.yesNo">yesNo</a></li></ul></li><li><a href="components.html">components</a><ul class='methods'><li data-type='method'><a href="components.html#.check_box">check_box</a></li><li data-type='method'><a href="components.html#.date_input">date_input</a></li><li data-type='method'><a href="components.html#.drop_down">drop_down</a></li><li data-type='method'><a href="components.html#.file_upload">file_upload</a></li><li data-type='method'><a href="components.html#.list_box">list_box</a></li><li data-type='method'><a href="components.html#.native_date_input">native_date_input</a></li><li data-type='method'><a href="components.html#.numeric_input">numeric_input</a></li><li data-type='method'><a href="components.html#.picture">picture</a></li><li data-type='method'><a href="components.html#.popup">popup</a></li><li data-type='method'><a href="components.html#.push_button">push_button</a></li><li data-type='method'><a href="components.html#.radio_button">radio_button</a></li><li data-type='method'><a href="components.html#.text_input">text_input</a></li><li data-type='method'><a href="components.html#.text_label">text_label</a></li><li data-type='method'><a href="components.html#.textbox_input">textbox_input</a></li><li data-type='method'><a href="components.html#.time_input">time_input</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#$$">$$</a></li><li><a href="global.html#DOMUtils">DOMUtils</a></li><li><a href="global.html#DateTimeUtils.">DateTimeUtils.</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">DOMUtils.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * DOMUtils DOM Helper Utilities
 * Native DOM API wrappers to replace jQuery functionality
 */
const DOMUtils = {
    // Radio button groups storage (moved from global scope)
    RadioButtons: {
        groups: {}
    },

    // Track event handlers to ensure only one handler per event type per element
    _eventHandlers: new WeakMap(),

    /**
     * Internal helper to resolve element from string or element
     * @param {string|HTMLElement} elementOrId - Element or ID string
     * @returns {HTMLElement|null}
     */
    _resolveElement: (elementOrId) => {
        if (typeof elementOrId === 'string') {
            const element = DOMUtils.getElement(elementOrId);
            if (!element) {
                console.log(`DOMUtils: Element with id "${elementOrId}" not found`);
            }
            return element;
        }
        return elementOrId;
    },

    /**
     * Get element by ID (handles optional # prefix)
     * @param {string} id - Element ID (with or without #)
     * @returns {HTMLElement|null}
     */
    getElement: (id) => document.getElementById(id.replace(/^#/, '')),

    /**
     * Query single element
     * @param {string} selector - CSS selector
     * @param {Element} parent - Parent element (default: document)
     * @returns {Element|null}
     */
    query: (selector, parent = document) => parent.querySelector(selector),

    /**
     * Query all matching elements
     * @param {string} selector - CSS selector
     * @param {Element} parent - Parent element (default: document)
     * @returns {NodeList}
     */
    queryAll: (selector, parent = document) => parent.querySelectorAll(selector),

    /**
     * Show an element
     * @param {HTMLElement|string} el - Element or element ID
     */
    show: (el) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.removeAttribute('hidden');
            // Restore original display if we stored it, otherwise clear inline style
            const originalDisplay = el.dataset.originalDisplay;
            if (originalDisplay !== undefined) {
                el.style.display = originalDisplay;
            } else {
                // Temporarily clear inline display to check what CSS would apply
                const currentInlineDisplay = el.style.display;
                el.style.display = '';

                // Get the computed style after clearing inline display
                const computedDisplay = getComputedStyle(el).display;

                // If CSS (not inline) is making it 'none', we need to override
                if (computedDisplay === 'none') {
                    // Try to determine the appropriate display value
                    // 1. Check if element has inline-block children (like radio buttons)
                    const hasInlineBlockChild = el.querySelector('[style*="inline-block"]') !== null;
                    // 2. Check for common inline elements
                    const isInlineElement = ['SPAN', 'A', 'LABEL', 'INPUT', 'BUTTON'].includes(el.tagName);

                    if (hasInlineBlockChild || isInlineElement) {
                        el.style.display = 'inline-block';
                    } else {
                        el.style.display = 'block';
                    }
                } else if (currentInlineDisplay &amp;&amp; currentInlineDisplay !== 'none') {
                    // If there was a previous inline display value, restore it
                    el.style.display = currentInlineDisplay;
                }
                // Otherwise leave it cleared - CSS will handle it
            }
            el.style.visibility = 'visible';
        }
    },

    /**
     * Hide an element
     * @param {HTMLElement|string} el - Element or element ID
     */
    hide: (el) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            // Store original display before hiding (only if currently visible)
            const computedDisplay = getComputedStyle(el).display;
            if (computedDisplay !== 'none') {
                el.dataset.originalDisplay = computedDisplay;
            }
            el.setAttribute('hidden', '');
            el.style.display = 'none';
            el.style.visibility = 'hidden';
        }
    },

    /**
     * Check if element is hidden
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {boolean}
     */
    isHidden: (el) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return true;
        return el.offsetParent === null ||
               getComputedStyle(el).display === 'none' ||
               getComputedStyle(el).visibility === 'hidden';
    },

    /**
     * Check if element is visible
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {boolean}
     */
    isVisible: (el) => !DOMUtils.isHidden(el),

    /**
     * Set CSS property
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} prop - CSS property name
     * @param {string} val - CSS value
     */
    css: (el, prop, val) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.style[prop] = val;
        }
    },

    /**
     * Get or set attribute
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} name - Attribute name
     * @param {string} [val] - Value to set (omit to get)
     * @returns {string|null|undefined}
     */
    attr: (el, name, val) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return undefined;
        if (val === undefined) {
            return el.getAttribute(name);
        }
        el.setAttribute(name, val);
    },

    /**
     * Remove attribute
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} name - Attribute name
     */
    removeAttr: (el, name) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.removeAttribute(name);
        }
    },

    /**
     * Get or set property
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} name - Property name
     * @param {*} [val] - Value to set (omit to get)
     * @returns {*}
     */
    prop: (el, name, val) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return undefined;
        if (val === undefined) {
            return el[name];
        }
        el[name] = val;
    },

    /**
     * Add event listener
     * Automatically removes any previous handler for the same event type to ensure only one handler at a time
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} event - Event type
     * @param {Function} handler - Event handler (pass null to remove handler without adding a new one)
     */
    on: (el, event, handler) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return;

        // Get or create the handlers map for this element
        let handlersMap = DOMUtils._eventHandlers.get(el);
        if (!handlersMap) {
            handlersMap = new Map();
            DOMUtils._eventHandlers.set(el, handlersMap);
        }

        // Remove previous handler for this event type if it exists
        const previousHandler = handlersMap.get(event);
        if (previousHandler) {
            el.removeEventListener(event, previousHandler);
            handlersMap.delete(event);
        }

        // Add new handler if provided
        if (handler) {
            el.addEventListener(event, handler);
            handlersMap.set(event, handler);
        }
    },

    /**
     * Remove event listener
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} event - Event type
     * @param {Function} [handler] - Event handler reference (optional - if not provided, removes tracked handler)
     */
    off: (el, event, handler) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return;

        // If no specific handler provided, remove the tracked handler
        if (!handler) {
            const handlersMap = DOMUtils._eventHandlers.get(el);
            if (handlersMap) {
                const trackedHandler = handlersMap.get(event);
                if (trackedHandler) {
                    el.removeEventListener(event, trackedHandler);
                    handlersMap.delete(event);
                }
            }
        } else {
            // Remove the specific handler
            el.removeEventListener(event, handler);
            // Also remove from tracking if it matches
            const handlersMap = DOMUtils._eventHandlers.get(el);
            if (handlersMap &amp;&amp; handlersMap.get(event) === handler) {
                handlersMap.delete(event);
            }
        }
    },

    /**
     * Append HTML string to element
     * @param {HTMLElement|string} parent - Element or element ID
     * @param {string} html - HTML string
     */
    append: (parent, html) => {
        parent = DOMUtils._resolveElement(parent);
        if (parent) {
            parent.insertAdjacentHTML('beforeend', html);
        }
    },

    /**
     * Append child element
     * @param {HTMLElement|string} parent - Element or element ID
     * @param {HTMLElement} child
     */
    appendChild: (parent, child) => {
        parent = DOMUtils._resolveElement(parent);
        if (parent &amp;&amp; child) {
            parent.appendChild(child);
        }
    },

    /**
     * Clear element contents
     * @param {HTMLElement|string} el - Element or element ID
     */
    empty: (el) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.innerHTML = '';
        }
    },

    /**
     * Remove element from DOM
     * @param {HTMLElement|string} el - Element or element ID
     */
    remove: (el) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.remove();
        }
    },

    /**
     * Create element with optional attributes
     * @param {string} tag - Tag name
     * @param {Object} [attrs] - Attributes to set
     * @returns {HTMLElement}
     */
    create: (tag, attrs = {}) => {
        const el = document.createElement(tag);
        Object.entries(attrs).forEach(([k, v]) => el.setAttribute(k, v));
        return el;
    },

    /**
     * Get children as array
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {HTMLElement[]}
     */
    children: (el) => {
        el = DOMUtils._resolveElement(el);
        return el ? Array.from(el.children) : [];
    },

    /**
     * Find single descendant
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} selector
     * @returns {Element|null}
     */
    find: (el, selector) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.querySelector(selector) : null;
    },

    /**
     * Find all descendants
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} selector
     * @returns {NodeList}
     */
    findAll: (el, selector) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.querySelectorAll(selector) : [];
    },

    /**
     * Get next sibling element
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {Element|null}
     */
    next: (el) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.nextElementSibling : null;
    },

    /**
     * Get parent element
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {Element|null}
     */
    parent: (el) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.parentElement : null;
    },

    /**
     * Get closest ancestor matching selector
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} selector
     * @returns {Element|null}
     */
    closest: (el, selector) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.closest(selector) : null;
    },

    /**
     * Get element offset (position relative to document)
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {{top: number, left: number}}
     */
    offset: (el) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return { top: 0, left: 0 };
        const rect = el.getBoundingClientRect();
        return {
            top: rect.top + window.scrollY,
            left: rect.left + window.scrollX
        };
    },

    /**
     * Set element offset (absolute position)
     * Like jQuery's .offset() setter, this accounts for the element's offsetParent.
     * @param {HTMLElement|string} el - Element or element ID
     * @param {{top: number, left: number}} pos - Desired position relative to document
     */
    setOffset: (el, { top, left }) => {
        el = DOMUtils._resolveElement(el);
        if (!el) return;

        // Ensure element is positioned
        const currentPosition = getComputedStyle(el).position;
        if (currentPosition === 'static') {
            el.style.position = 'relative';
        }

        // Get current offset from document
        const curOffset = DOMUtils.offset(el);

        // Get current CSS top/left values (may be 'auto')
        const curCSSTop = parseFloat(getComputedStyle(el).top) || 0;
        const curCSSLeft = parseFloat(getComputedStyle(el).left) || 0;

        // Calculate the adjustment needed
        // The CSS top/left properties are relative to the offsetParent,
        // but offset() returns document-relative coordinates.
        // To set a document-relative position, we need to adjust for this difference.
        const props = {};
        if (top != null) {
            props.top = (top - curOffset.top) + curCSSTop;
        }
        if (left != null) {
            props.left = (left - curOffset.left) + curCSSLeft;
        }

        // Set the calculated values
        if (props.top !== undefined) {
            el.style.top = props.top + 'px';
        }
        if (props.left !== undefined) {
            el.style.left = props.left + 'px';
        }
    },

    /**
     * Get or set form element value
     * @param {HTMLElement|string} el - Element or element ID
     * @param {*} [value] - Value to set (omit to get)
     * @returns {*}
     */
    val: (el, value) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return undefined;
        if (value === undefined) {
            return el.value;
        }
        el.value = value;
    },

    /**
     * Iterate over collection
     * @param {NodeList|Array} collection
     * @param {Function} fn - Callback (element, index)
     */
    each: (collection, fn) => {
        Array.from(collection).forEach(fn);
    },

    /**
     * Add CSS class
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} cls - Class name
     */
    addClass: (el, cls) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.classList.add(cls);
        }
    },

    /**
     * Remove CSS class
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} cls - Class name
     */
    removeClass: (el, cls) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.classList.remove(cls);
        }
    },

    /**
     * Check if element has class
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} cls - Class name
     * @returns {boolean}
     */
    hasClass: (el, cls) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.classList.contains(cls) : false;
    },

    /**
     * Toggle CSS class
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} cls - Class name
     */
    toggleClass: (el, cls) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.classList.toggle(cls);
        }
    },

    /**
     * Get element width
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {number}
     */
    width: (el) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.offsetWidth : 0;
    },

    /**
     * Set element width
     * @param {HTMLElement|string} el - Element or element ID
     * @param {number|string} val
     */
    setWidth: (el, val) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.style.width = typeof val === 'number' ? val + 'px' : val;
        }
    },

    /**
     * Get element height
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {number}
     */
    height: (el) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.offsetHeight : 0;
    },

    /**
     * Set element height
     * @param {HTMLElement|string} el - Element or element ID
     * @param {number|string} val
     */
    setHeight: (el, val) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.style.height = typeof val === 'number' ? val + 'px' : val;
        }
    },

    /**
     * Focus element
     * @param {HTMLElement|string} el - Element or element ID
     */
    focus: (el) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.focus();
        }
    },

    /**
     * Blur element
     * @param {HTMLElement|string} el - Element or element ID
     */
    blur: (el) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.blur();
        }
    },

    /**
     * Trigger click event
     * @param {HTMLElement|string} el - Element or element ID
     */
    click: (el) => {
        el = DOMUtils._resolveElement(el);
        if (el) {
            el.click();
        }
    },

    /**
     * Get/set text content
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} [text] - Text to set (omit to get)
     * @returns {string|undefined}
     */
    text: (el, text) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return undefined;
        if (text === undefined) {
            return el.textContent;
        }
        el.textContent = text;
    },

    /**
     * Get/set HTML content
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} [html] - HTML to set (omit to get)
     * @returns {string|undefined}
     */
    html: (el, html) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return undefined;
        if (html === undefined) {
            return el.innerHTML;
        }
        el.innerHTML = html;
    },

    /**
     * Replace element with new content
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string|HTMLElement} content - HTML string or element
     */
    replaceWith: (el, content) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return;
        if (typeof content === 'string') {
            el.outerHTML = content;
        } else {
            el.replaceWith(content);
        }
    },

    /**
     * Wrap element's inner content in a new element
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} wrapperTag - Tag name for wrapper
     * @returns {HTMLElement} The wrapper element
     */
    wrapInner: (el, wrapperTag = 'div') => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return null;
        const wrapper = document.createElement(wrapperTag);
        while (el.firstChild) {
            wrapper.appendChild(el.firstChild);
        }
        el.appendChild(wrapper);
        return wrapper;
    },

    /**
     * Get all attributes as object
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {Object}
     */
    getAllAttributes: (el) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return {};
        const ret = {};
        Array.from(el.attributes).forEach(attr => {
            ret[attr.name] = attr.value;
        });
        return ret;
    },

    /**
     * Get/set caret position in input/textarea
     * Converted from jQuery caret plugin
     * @param {HTMLElement|string} target - Element or element ID
     * @param {number|Array} [pos] - Position to set (omit to get)
     * @returns {number|{start: number, end: number}|undefined}
     */
    caret: (target, pos) => {
        target = DOMUtils._resolveElement(target);
        if (!target)
            return undefined;

        const isContentEditable = target.contentEditable === 'true';

        // Get caret position
        if (pos === undefined) {
            // Textarea/input
            if (target.selectionStart !== undefined) {
                return target.selectionStart;
            }
            // ContentEditable
            if (isContentEditable) {
                target.focus();
                const selection = window.getSelection();
                if (selection.rangeCount === 0) return 0;
                const range1 = selection.getRangeAt(0);
                const range2 = range1.cloneRange();
                range2.selectNodeContents(target);
                range2.setEnd(range1.endContainer, range1.endOffset);
                return range2.toString().length;
            }
            return undefined;
        }

        // Set caret position
        if (pos === -1) {
            pos = isContentEditable ? target.textContent.length : target.value.length;
        }

        // Handle array [start, end] for selection
        if (Array.isArray(pos)) {
            if (target.setSelectionRange) {
                target.setSelectionRange(pos[0], pos[1]);
            }
            return;
        }

        // Set single position
        if (target.setSelectionRange) {
            target.setSelectionRange(pos, pos);
        } else if (isContentEditable) {
            target.focus();
            const selection = window.getSelection();
            const range = document.createRange();

            // Find the text node and offset
            let charCount = 0;
            let found = false;

            const walker = document.createTreeWalker(
                target,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );

            let node;
            while ((node = walker.nextNode()) &amp;&amp; !found) {
                const nodeLength = node.textContent.length;
                if (charCount + nodeLength >= pos) {
                    range.setStart(node, pos - charCount);
                    range.setEnd(node, pos - charCount);
                    found = true;
                }
                charCount += nodeLength;
            }

            if (found) {
                selection.removeAllRanges();
                selection.addRange(range);
            }
        }
    },

    /**
     * Trigger an event on an element
     * Replacement for $('#el').trigger('eventName')
     * @param {HTMLElement|string} el - Element or element ID
     * @param {string} eventName - Name of the event (e.g., 'click', 'change')
     */
    trigger: (el, eventName) => {
        el = DOMUtils._resolveElement(el);
        if (!el)
            return;
        const event = new Event(eventName, {bubbles: true, cancelable: true});
        el.dispatchEvent(event);
    },

    /**
     * Execute callback when DOM is ready
     * Replacement for $(function() {}) pattern
     * @param {Function} callback - Function to execute when DOM is ready
     */
    documentReady: (callback) => {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', callback);
        } else {
            callback();
        }
    },

    /**
     * Get currently focused element
     * Replacement for $(':focus')
     * @returns {Element|null}
     */
    getFocusedElement: () => document.activeElement,

    /**
     * Fetch HTML content from URL
     * Replacement for $.get()
     * @param {string} url - URL to fetch
     * @param {Function} successCallback - Callback for success
     * @param {Function} [errorCallback] - Callback for error
     */
    fetchHTML: (url, successCallback, errorCallback) => {
        fetch(url)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.text();
            })
            .then(data => {
                if (successCallback) {
                    successCallback(data);
                }
            })
            .catch(error => {
                if (errorCallback) {
                    errorCallback(error);
                } else {
                    console.error('Fetch failed:', error);
                }
            });
    },

    /**
     * Remove all event listeners from element
     * Replacement for $('#el').off() without parameters
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {HTMLElement} The new cloned element
     */
    removeAllListeners: (el) => {
        el = DOMUtils._resolveElement(el);
        if (!el || !el.parentNode)
            return el;
        const newElement = el.cloneNode(true);
        el.parentNode.replaceChild(newElement, el);
        return newElement;
    },

    /**
     * Get element by ID and remove all its event listeners in one atomic operation.
     * This is useful for popup buttons that may have handlers attached multiple times.
     * @param {string} id - Element ID (with or without #)
     * @returns {HTMLElement|null} The new cloned element with listeners removed, or null if not found
     */
    getElementWithCleanListeners: (id) => {
        const el = DOMUtils.getElement(id);
        if (!el)
            return null;
        return DOMUtils.removeAllListeners(el);
    },

    /**
     * Get element bounding client rect
     * @param {HTMLElement|string} el - Element or element ID
     * @returns {DOMRect|null}
     */
    getRect: (el) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.getBoundingClientRect() : null;
    },

    /**
     * Check if element contains another element
     * @param {HTMLElement|string} el - Element or element ID
     * @param {HTMLElement} other - Element to check
     * @returns {boolean}
     */
    contains: (el, other) => {
        el = DOMUtils._resolveElement(el);
        return el ? el.contains(other) : false;
    },

    /**
     * Download content as a file
     * @param {string} filename - Name for the downloaded file
     * @param {string} content - File content
     * @param {string} [mimeType='text/html'] - MIME type
     */
    downloadFile: (filename, content, mimeType) => {
        let blob = new Blob([content], { type: mimeType || 'text/html' });
        let url = URL.createObjectURL(blob);
        let a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    },

    /**
     * Prevent accidental browser back button and page reload/close.
     * Back button shows a confirmation via onBack callback.
     * Reload/close triggers the browser's built-in "Leave site?" warning.
     * Both are gated on the isActive function.
     * @param {Function} isActive - Returns true when protection should be active
     * @param {Function} [onBack] - Called when back button is pressed while active
     */
    preventNavigation: (() => {
        let enabled = false;
        let popHandler = null;
        let unloadHandler = null;
        let stateTag = null;
        let addedHistoryEntry = false;

        function enable(onBack) {
            if (enabled)
                return;

            enabled = true;

            // Unique marker for our state entry
            stateTag = "prevent-nav-" + Date.now() + "-" + Math.random();

            // Add ONE history entry we can recognize
            history.pushState({ __preventNav: stateTag }, document.title, location.href);
            addedHistoryEntry = true;

            popHandler = function (e) {
                if (!enabled)
                    return;

                // If we landed on an entry that is NOT ours, bounce back to ours once.
                const st = e.state;
                if (!st || st.__preventNav !== stateTag)
                    history.pushState({ __preventNav: stateTag }, document.title, location.href);

                if (onBack)
                    onBack();
            };

            unloadHandler = function (e) {
                if (!enabled)
                    return;

                e.preventDefault();
                e.returnValue = '';
                return '';
            };

            window.addEventListener('popstate', popHandler);
            window.addEventListener('beforeunload', unloadHandler);
        }

        function disable({ undoHistory = true } = {}) {
            if (!enabled)
                return;
 
            enabled = false;

            if (popHandler)
                window.removeEventListener('popstate', popHandler);

            if (unloadHandler)
                window.removeEventListener('beforeunload', unloadHandler);

            popHandler = null;
            unloadHandler = null;

            // Optional: attempt to remove the entry we added by going back once.
            // This is the closest you can get to "undo pushState".
            if (undoHistory &amp;&amp; addedHistoryEntry) {
                addedHistoryEntry = false;
                history.back();
            }

            stateTag = null;
        }

        return function (isActive, onBack, options) {
            if (isActive)
                enable(onBack);
            else
                disable(options);
        };
    })()

};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
